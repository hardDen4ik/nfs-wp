{"version":3,"names":[],"mappings":"","sources":["scripts.js"],"sourcesContent":["!(function ($) {\n    'use strict';\n\n    $(document).ready(function () {\n\n\n        $.agni_builder_frontend_products_processing_display_options = function (product_data, response) {\n\n            response = $(response).wrap('<ul />').parent();\n\n            if (product_data.product_title == false) {\n                response.find('.woocommerce-loop-product__title').remove();\n            }\n            if (typeof product_data.product_desc == 'undefined' || product_data.product_desc == false) {\n                response.find('.woocommerce-loop-product__description').remove();\n            }\n            if (product_data.product_category == false) {\n                response.find('.woocommerce-loop-product__category').remove();\n            }\n            if (product_data.product_price == false) {\n                response.find('.price').remove();\n            }\n            if (product_data.product_rating == false) {\n                response.find('.woocommerce-product-rating').remove();\n            }\n            if (product_data.product_stock == false) {\n                response.find('.agni-stock-indicator').remove();\n            }\n            if (product_data.product_countdown == false) {\n                response.find('.agni-sale-countdown').remove();\n            }\n            if (product_data.product_add_to_cart == false) {\n                response.find('.agni-add-to-cart').remove();\n            }\n            if (product_data.product_add_to_compare == false) {\n                response.find('.agni-add-to-compare').remove();\n            }\n            if (product_data.product_quickview == false) {\n                response.find('.agni-quickview').remove();\n            }\n            if (product_data.product_qty == false) {\n                response.find('.agni-update-cart').remove();\n            }\n\n            response = response.children()\n\n            return response;\n\n        }\n\n        $.agni_builder_frontend_products_categories_processing_display_options = function (product_data, response) {\n            response = $(response).wrap('<ul />').parent();\n\n            if (product_data.category_title == false) {\n                response.find('.woocommerce-loop-category__title').remove();\n            }\n            if (product_data.category_desc == false) {\n                response.find('.woocommerce-loop-category__description').remove();\n            }\n            if (product_data.category_count == false) {\n                response.find('.woocommerce-loop-category__title .count').remove();\n            }\n\n\n            response = response.children()\n\n            return response;\n        }\n\n        $.agni_builder_frontend_products_tab = function ($this, product_data) {\n\n            // console.log(\"Product data:\", product_data);\n\n            $.ajax({\n                url: agni_builder_frontend.ajaxurl_wc.toString().replace('%%endpoint%%', 'agni_builder_products_tab_contents'),\n                type: 'POST',\n                data: product_data,\n                dataType: 'json',\n                success: function (response) {\n                    // console.log(response);\n                    if (!response.success) {\n                        return;\n                    }\n\n                    var newContent = $.agni_builder_frontend_products_processing_display_options(product_data, response['data']['content']);\n\n                    $this.find('.agni-block-products-tab-contents > ul').html(newContent);\n                    // $this.find('.agni-block-products-tab-header').append(response['data']['pagination']);\n                    $(response['data']['pagination']).insertBefore($this.find('.agni-block-products-tab-btn'));\n\n\n                    $this.find('.agni-products-carousel').each(function () {\n                        $(this).slick('unslick');\n                        $.agni_products_carousel($(this));\n                    })\n\n                    // Agni sale countdown\n                    $('.agni-sale-countdown').each(function () {\n                        $.agni_sale_countdown.init($(this));\n                    })\n\n                    // WooCommerce archives thumbnail slider\n                    $('.woocommerce-loop-product__thumbnail').not('.slick-initialized').each(function () {\n                        var $this = $(this);\n                        if ($this.hasClass('style-3') && $this.children().length > 1) {\n                            $.agni_scripts.archives_gallery_slider($this);\n                        }\n                    })\n\n\n                    // $this.find('.has-inline-products').each(function () {\n                    //     if ($(this).hasClass('slick-initialized')) {\n                    //         $(this).slick('unslick');\n                    //     }\n                    //     $.agni_inline_products_carousel($(this));\n                    // })\n\n                    if ($this.hasClass('has-scroll-navigation-mobile')) {\n                        var content = $this.find('.agni-block-products-tab-contents>ul'),\n                            nav = $this.find('.agni-block-products-tab-nav');\n                        $.agni_inline_products_scroll(content, nav);\n                    }\n\n\n\n                    if (typeof wc_add_to_cart_variation_params !== 'undefined') {\n                        $('.variations_form').each(function () {\n                            $(this).wc_variation_form();\n                        });\n                    }\n\n                }\n\n            })\n\n        }\n\n        $.agni_builder_frontend_products_categories_tab = function ($this, product_data) {\n\n            // console.log(product_data); // JSON.stringify JSON.parse(product_data)\n            $.ajax({\n                url: agni_builder_frontend.ajaxurl_wc.toString().replace('%%endpoint%%', 'agni_builder_products_categories_tab_contents'),\n                type: 'POST',\n                data: product_data,\n                dataType: 'json',\n                success: function (response) {\n                    console.log(response);\n                    if (!response.success) {\n                        return;\n                    }\n\n                    var newContent = $.agni_builder_frontend_products_categories_processing_display_options(product_data, response['data']['content']);\n\n                    $this.find('.agni-block-products-categories-tab-contents > ul').html(newContent);\n                    $this.find('.agni-block-products-categories-tab-header').append(response['data']['pagination']);\n\n                    $this.find('.agni-products-carousel').each(function () {\n                        $(this).slick('unslick');\n                        $.agni_products_carousel($(this));\n                    })\n\n\n                    // $this.find('.has-inline-categories').each(function () {\n                    //     if ($(this).hasClass('slick-initialized')) {\n                    //         $(this).slick('unslick');\n                    //     }\n                    //     $.agni_inline_products_carousel($(this));\n                    // })\n\n                    if ($this.hasClass('has-scroll-navigation-mobile')) {\n                        var content = $this.find('.agni-block-products-categories-tab-contents>ul'),\n                            nav = $this.find('.agni-block-products-categories-tab-nav');\n                        $.agni_inline_products_scroll(content, nav);\n                    }\n\n                }\n            })\n\n        }\n\n        $.agni_builder_frontend_products_ajax_pagination = function ($this, product_data, paginationArgs = {}, append = false) {\n\n            $.ajax({\n                url: agni_builder_frontend.ajaxurl_wc.toString().replace('%%endpoint%%', 'agni_builder_ajax_get_products'),\n                type: 'POST',\n                data: product_data,\n                success: function (response) {\n                    // console.log(response);\n                    if (!response) {\n                        return;\n                    }\n\n                    response = $.agni_builder_frontend_products_processing_display_options(product_data, response);\n\n\n                    if (!append) {\n                        $this.find(' > ul').html(response);\n                    }\n                    else {\n                        $this.find(' > ul').append(response);\n                    }\n\n                    if (!$.isEmptyObject(paginationArgs)) {\n                        var { isPagination, navSelector, loadMoreSelector, prevNavSelector, nextNavSelector, pagination, currentPageNum, totalPageNum, totalProducts } = paginationArgs\n                        var newPageNum = currentPageNum;\n                        if (navSelector.hasClass(loadMoreSelector) || navSelector.hasClass(nextNavSelector)) {\n                            if (totalPageNum == (currentPageNum + 1)) {\n                                if (!isPagination) {\n                                    pagination.remove();\n                                }\n                                newPageNum = currentPageNum + 1;\n                            }\n                            else {\n                                newPageNum = currentPageNum + 1;\n\n                            }\n                        }\n                        else if (navSelector.hasClass(prevNavSelector)) {\n                            newPageNum = currentPageNum - 1\n                        }\n\n                        pagination.attr('data-current-page-num', newPageNum);\n\n                        if (isPagination) {\n                            (newPageNum != '1') ? pagination.find('.' + prevNavSelector).removeClass('disabled') : pagination.find('.' + prevNavSelector).addClass('disabled');\n\n                            (newPageNum != totalPageNum) ? pagination.find('.' + nextNavSelector).removeClass('disabled') : pagination.find('.' + nextNavSelector).addClass('disabled');\n                        }\n                    }\n\n                    // Agni sale countdown\n                    $('.agni-sale-countdown').each(function () {\n                        $.agni_sale_countdown.init($(this));\n                    })\n\n                    // WooCommerce archives thumbnail slider\n                    $('.woocommerce-loop-product__thumbnail').not('.slick-initialized').each(function () {\n                        var $this = $(this);\n                        if ($this.hasClass('style-3') && $this.children().length > 1) {\n                            $.agni_scripts.archives_gallery_slider($this);\n                        }\n                    })\n\n                    if (typeof wc_add_to_cart_variation_params !== 'undefined') {\n                        $('.variations_form').each(function () {\n                            $(this).wc_variation_form();\n                        });\n                    }\n\n\n                }\n            })\n\n        }\n\n        $('.agni-block-products').each(function () {\n            var $this = $(this),\n                contents = $this.find('.agni-block-products-contents'),\n                pagination = $this.find('.agni-block-products-pagination'),\n                navBtn = pagination.find('.agni-block-products-pagination__nav'),\n                loadMoreSelector = 'load-more',\n                prevNavSelector = 'nav-prev',\n                nextNavSelector = 'nav-next';\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            var product_data = pagination.data('args');\n            var current_page_num = pagination.attr('data-current-page-num');\n            var total_page_num = pagination.data('total-page-num');\n            var total_products = pagination.data('total-products');\n\n            var currentDevice = 'mobile';\n            var countUpdated = false;\n\n            if (pagination.length !== 0) {\n\n                var products_count_mobile = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                    currentDevice = 'tab';\n                    if ((product_data['columns'][currentDevice] * product_data['rows'][currentDevice]) !== (products_count_mobile)) {\n                        countUpdated = true;\n                    }\n                }\n                else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                    currentDevice = 'laptop';\n                    if ((product_data['columns'][currentDevice] * product_data['rows'][currentDevice]) !== (products_count_mobile)) {\n                        countUpdated = true;\n                    }\n                }\n                else if ((breakpoints['desktop'] < window.innerWidth)) {\n                    currentDevice = 'desktop';\n                    if ((product_data['columns'][currentDevice] * product_data['rows'][currentDevice]) !== (products_count_mobile)) {\n                        countUpdated = true;\n                    }\n                }\n\n\n                if (!product_data['productsSynced']) {\n                    countUpdated = false;\n                }\n\n                var currentDeviceTotalPageNum = total_page_num[currentDevice];\n\n                if (currentDevice !== 'mobile' && countUpdated) {\n\n                    var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                    product_data['count'] = (total_products < product_count_on_grid) ? total_products : product_count_on_grid;\n\n                    $.agni_builder_frontend_products_ajax_pagination(contents, product_data);\n                }\n\n                if (current_page_num == '1') {\n                    pagination.find('.' + prevNavSelector).addClass('disabled');\n                }\n\n                if (current_page_num == currentDeviceTotalPageNum) {\n                    pagination.find('.' + nextNavSelector).addClass('disabled');\n                }\n\n            }\n\n        })\n\n        $(document).on('click', '.agni-block-products-pagination__nav', function () {\n            var thisNavBtn = $(this);\n            var $this = thisNavBtn.closest('.agni-block-products, .agni-block-products-tab');\n            var pagination = thisNavBtn.closest('.agni-block-products-pagination');\n\n            var contents = $this.hasClass('agni-block-products-tab') ? $this.find('.agni-block-products-tab-contents') : $this.find('.agni-block-products-contents');\n\n            var loadMoreSelector = 'load-more',\n                prevNavSelector = 'nav-prev',\n                nextNavSelector = 'nav-next';\n\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            var product_data = pagination.data('args');\n            // var current_page_num = pagination.attr('data-current-page-num');\n            var total_page_num = pagination.data('total-page-num');\n            var total_products = pagination.data('total-products');\n\n\n            if (thisNavBtn.hasClass('disabled')) {\n                return null;\n            }\n\n            var currentPageNum = pagination.attr('data-current-page-num');\n\n\n            var paginationArray = {\n                'desktop': pagination.hasClass('has-pagination-desktop'),\n                'laptop': pagination.hasClass('has-pagination-laptop'),\n                'tab': pagination.hasClass('has-pagination-tab'),\n                'mobile': pagination.hasClass('has-pagination-mobile')\n            };\n\n            var currentDevice = 'mobile';\n            if (typeof breakpoints !== 'undefined') {\n\n                if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                    currentDevice = 'tab';\n                }\n                else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                    currentDevice = 'laptop';\n                }\n                else if ((breakpoints['desktop'] < window.innerWidth)) {\n                    currentDevice = 'desktop';\n                }\n            }\n\n            var currentDeviceTotalPageNum = total_page_num[currentDevice];\n\n            if (paginationArray[currentDevice]) {\n\n                var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                if (!product_data['productsSynced']) {\n                    var product_count_on_grid = product_data['countOnGrid'];\n                }\n\n                product_data['count'] = product_count_on_grid;\n\n                if (thisNavBtn.hasClass(loadMoreSelector) || thisNavBtn.hasClass(nextNavSelector)) {\n                    if (currentPageNum == (currentDeviceTotalPageNum - 1)) {\n                        product_data['count'] = total_products - (product_count_on_grid * parseInt(currentPageNum));\n                    }\n\n                    product_data['offset'] = product_count_on_grid * parseInt(currentPageNum);\n                }\n                else if (thisNavBtn.hasClass(prevNavSelector)) {\n                    product_data['offset'] = 0;\n                    if (currentPageNum > '2') {\n                        product_data['offset'] = product_count_on_grid * (parseInt(currentPageNum) - 2);\n                    }\n                }\n                var append = false;\n                if (thisNavBtn.hasClass(loadMoreSelector)) {\n                    append = true;\n                }\n\n\n                var paginationArgs = {\n                    isPagination: !append,\n                    navSelector: thisNavBtn,\n                    loadMoreSelector: loadMoreSelector,\n                    prevNavSelector: prevNavSelector,\n                    nextNavSelector: nextNavSelector,\n                    currentPageNum: parseInt(currentPageNum),\n                    totalPageNum: currentDeviceTotalPageNum,\n                    totalProducts: total_products,\n                    pagination: pagination,\n                }\n\n                $.agni_builder_frontend_products_ajax_pagination(contents, product_data, paginationArgs, append);\n\n            }\n        })\n\n        $('.agni-block-products-tab').each(function () {\n            var $this = $(this),\n                product_tabs = $this.find('li');\n\n            product_tabs.each(function () {\n                var product_tab = $(this);\n\n                var breakpoints = agni_builder_frontend.breakpoints;\n                var product_data = product_tab.data('args');\n\n                var currentDevice = 'mobile';\n\n                // if (product_tab.hasClass('active')) {\n\n                //     // if (typeof breakpoints !== 'undefined') {\n\n                //     if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                //         currentDevice = 'tab';\n                //     }\n                //     else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                //         currentDevice = 'laptop';\n                //     }\n                //     else if ((breakpoints['desktop'] < window.innerWidth)) {\n                //         currentDevice = 'desktop';\n                //     }\n\n                //     product_data['totalProducts'] = product_data['count'];\n\n                //     if (typeof product_data['carousel'] !== 'undefined' && !product_data['carousel']) {\n                //         var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                //         if (!product_data['productsSynced']) {\n                //             var product_count_on_grid = product_data['countOnGrid'];\n                //         }\n\n                //         product_data['count'] = product_count_on_grid;\n                //     }\n\n                //     $.agni_builder_frontend_products_tab($this, product_data);\n                // }\n\n                product_tab.on('click', function () {\n                    // var product_tab = $(this);\n                    product_tabs.removeClass('active');\n                    product_tab.addClass('active');\n\n                    if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                        currentDevice = 'tab';\n                    }\n                    else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                        currentDevice = 'laptop';\n                    }\n                    else if ((breakpoints['desktop'] < window.innerWidth)) {\n                        currentDevice = 'desktop';\n                    }\n\n                    product_data['totalProducts'] = product_data['count'];\n\n                    if (typeof product_data['carousel'] !== 'undefined' && !product_data['carousel']) {\n                        var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                        product_data['count'] = product_count_on_grid;\n                    }\n\n                    $.agni_builder_frontend_products_tab($this, product_data);\n                })\n            })\n\n        })\n\n\n\n\n        $.agni_builder_frontend_products_categories_ajax_pagination = function ($this, product_data, paginationArgs = {}, append = false) {\n\n            // product_data['action'] = 'agni_builder_ajax_get_products_categories';\n\n            $.ajax({\n                url: agni_builder_frontend.ajaxurl_wc.toString().replace('%%endpoint%%', 'agni_builder_ajax_get_products_categories'),\n                // url: agni_builder_frontend.ajaxurl,\n                type: 'POST',\n                data: product_data,\n                success: function (response) {\n                    // console.log(\"res\", response);\n                    if (!response) {\n                        return;\n                    }\n\n                    response = $.agni_builder_frontend_products_categories_processing_display_options(product_data, response);\n\n\n                    if (!append) {\n                        $this.find(' > ul').html(response);\n                    }\n                    else {\n                        $this.find(' > ul').append(response);\n                    }\n\n                    if (!$.isEmptyObject(paginationArgs)) {\n                        var { isPagination, navSelector, loadMoreSelector, prevNavSelector, nextNavSelector, pagination, currentPageNum, totalPageNum, totalProducts } = paginationArgs\n                        var newPageNum = currentPageNum;\n                        if (navSelector.hasClass(loadMoreSelector) || navSelector.hasClass(nextNavSelector)) {\n                            if (totalPageNum == (currentPageNum + 1)) {\n                                if (!isPagination) {\n                                    pagination.remove();\n                                }\n                                newPageNum = currentPageNum + 1;\n                            }\n                            else {\n                                newPageNum = currentPageNum + 1;\n\n                            }\n                        }\n                        else if (navSelector.hasClass(prevNavSelector)) {\n                            newPageNum = currentPageNum - 1\n                        }\n\n                        pagination.attr('data-current-page-num', newPageNum);\n\n                        if (isPagination) {\n                            (newPageNum != '1') ? pagination.find('.' + prevNavSelector).removeClass('disabled') : pagination.find('.' + prevNavSelector).addClass('disabled');\n\n                            (newPageNum != totalPageNum) ? pagination.find('.' + nextNavSelector).removeClass('disabled') : pagination.find('.' + nextNavSelector).addClass('disabled');\n                        }\n                    }\n\n                    // Agni sale countdown\n                    $('.agni-sale-countdown').each(function () {\n                        $.agni_sale_countdown.init($(this));\n                    })\n\n                    // WooCommerce archives thumbnail slider\n                    $('.woocommerce-loop-product__thumbnail').not('.slick-initialized').each(function () {\n                        var $this = $(this);\n                        if ($this.hasClass('style-3') && $this.children().length > 1) {\n                            $.agni_scripts.archives_gallery_slider($this);\n                        }\n                    })\n\n                    if (typeof wc_add_to_cart_variation_params !== 'undefined') {\n                        $('.variations_form').each(function () {\n                            $(this).wc_variation_form();\n                        });\n                    }\n\n\n                }\n            })\n\n        }\n\n        $('.agni-block-products-categories').each(function () {\n            var $this = $(this),\n                contents = $this.find('.agni-block-products-categories-contents'),\n                pagination = $this.find('.agni-block-products-categories-pagination'),\n                navBtn = pagination.find('.agni-block-products-categories-pagination__nav'),\n                loadMoreSelector = 'load-more',\n                prevNavSelector = 'nav-prev',\n                nextNavSelector = 'nav-next';\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            var product_data = pagination.data('args');\n            var current_page_num = pagination.attr('data-current-page-num');\n            var total_page_num = pagination.data('total-page-num');\n            var total_products = pagination.data('total-products');\n\n            var currentDevice = 'mobile';\n            var countUpdated = false;\n\n            if (pagination.length !== 0) {\n\n                var products_count_mobile = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                    currentDevice = 'tab';\n                    if ((product_data['columns'][currentDevice] * product_data['rows'][currentDevice]) !== (products_count_mobile)) {\n                        countUpdated = true;\n                    }\n                }\n                else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                    currentDevice = 'laptop';\n                    if ((product_data['columns'][currentDevice] * product_data['rows'][currentDevice]) !== (products_count_mobile)) {\n                        countUpdated = true;\n                    }\n                }\n                else if ((breakpoints['desktop'] < window.innerWidth)) {\n                    currentDevice = 'desktop';\n                    if ((product_data['columns'][currentDevice] * product_data['rows'][currentDevice]) !== (products_count_mobile)) {\n                        countUpdated = true;\n                    }\n                }\n\n                if (!product_data['categoriesSynced']) {\n                    countUpdated = false;\n                }\n\n                var currentDeviceTotalPageNum = total_page_num[currentDevice];\n\n                if (currentDevice !== 'mobile' && countUpdated) {\n\n                    var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                    product_data['count'] = (total_products < product_count_on_grid) ? total_products : product_count_on_grid;\n\n                    $.agni_builder_frontend_products_categories_ajax_pagination(contents, product_data);\n                }\n\n                if (current_page_num == '1') {\n                    pagination.find('.' + prevNavSelector).addClass('disabled');\n                }\n\n                if (current_page_num == currentDeviceTotalPageNum) {\n                    pagination.find('.' + nextNavSelector).addClass('disabled');\n                }\n\n            }\n\n        })\n\n        $(document).on('click', '.agni-block-products-categories-pagination__nav', function () {\n            var thisNavBtn = $(this);\n            var $this = thisNavBtn.closest('.agni-block-products-categories, .agni-block-products-categories-tab');\n            var pagination = thisNavBtn.closest('.agni-block-products-categories-pagination');\n\n            var contents = $this.hasClass('agni-block-products-categories-tab') ? $this.find('.agni-block-products-categories-tab-contents') : $this.find('.agni-block-products-categories-contents');\n\n            var loadMoreSelector = 'load-more',\n                prevNavSelector = 'nav-prev',\n                nextNavSelector = 'nav-next';\n\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            var product_data = pagination.data('args');\n            // var current_page_num = pagination.attr('data-current-page-num');\n            var total_page_num = pagination.data('total-page-num');\n            var total_products = pagination.data('total-products');\n\n\n            if (thisNavBtn.hasClass('disabled')) {\n                return null;\n            }\n\n            var currentPageNum = pagination.attr('data-current-page-num');\n\n\n            var paginationArray = {\n                'desktop': pagination.hasClass('has-pagination-desktop'),\n                'laptop': pagination.hasClass('has-pagination-laptop'),\n                'tab': pagination.hasClass('has-pagination-tab'),\n                'mobile': pagination.hasClass('has-pagination-mobile')\n            };\n\n            var currentDevice = 'mobile';\n            if (typeof breakpoints !== 'undefined') {\n\n                if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                    currentDevice = 'tab';\n                }\n                else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                    currentDevice = 'laptop';\n                }\n                else if ((breakpoints['desktop'] < window.innerWidth)) {\n                    currentDevice = 'desktop';\n                }\n            }\n\n            // console.log(\"current device\", currentDevice);\n            var currentDeviceTotalPageNum = total_page_num[currentDevice];\n\n            if (paginationArray[currentDevice]) {\n\n                var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                if (!product_data['categoriesSynced']) {\n                    var product_count_on_grid = product_data['countOnGrid'];\n                }\n\n                product_data['count'] = product_count_on_grid;\n\n                if (thisNavBtn.hasClass(loadMoreSelector) || thisNavBtn.hasClass(nextNavSelector)) {\n                    if (currentPageNum == (currentDeviceTotalPageNum - 1)) {\n                        product_data['count'] = total_products - (product_count_on_grid * parseInt(currentPageNum));\n                    }\n\n                    product_data['offset'] = product_count_on_grid * parseInt(currentPageNum);\n                }\n                else if (thisNavBtn.hasClass(prevNavSelector)) {\n                    product_data['offset'] = 0;\n                    if (currentPageNum > '2') {\n                        product_data['offset'] = product_count_on_grid * (parseInt(currentPageNum) - 2);\n                    }\n                }\n                var append = false;\n                if (thisNavBtn.hasClass(loadMoreSelector)) {\n                    append = true;\n                }\n\n\n                var paginationArgs = {\n                    isPagination: !append,\n                    navSelector: thisNavBtn,\n                    loadMoreSelector: loadMoreSelector,\n                    prevNavSelector: prevNavSelector,\n                    nextNavSelector: nextNavSelector,\n                    currentPageNum: parseInt(currentPageNum),\n                    totalPageNum: currentDeviceTotalPageNum,\n                    totalProducts: total_products,\n                    pagination: pagination,\n                }\n\n                $.agni_builder_frontend_products_categories_ajax_pagination(contents, product_data, paginationArgs, append);\n\n            }\n        })\n\n\n        $('.agni-block-products-categories-tab').each(function () {\n            var $this = $(this),\n                product_tabs = $this.find('li');\n\n            product_tabs.each(function () {\n                var product_tab = $(this);\n\n                var breakpoints = agni_builder_frontend.breakpoints;\n                var product_data = product_tab.data('args');\n\n                var currentDevice = 'mobile';\n\n                // if (product_tab.hasClass('active')) {\n\n                //     // if (typeof breakpoints !== 'undefined') {\n\n                //     if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                //         currentDevice = 'tab';\n                //     }\n                //     else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                //         currentDevice = 'laptop';\n                //     }\n                //     else if ((breakpoints['desktop'] < window.innerWidth)) {\n                //         currentDevice = 'desktop';\n                //     }\n\n                //     product_data['totalProducts'] = product_data['count'];\n\n                //     if (typeof product_data['carousel'] !== 'undefined' && !product_data['carousel']) {\n                //         var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                //         if (!product_data['categoriesSynced']) {\n                //             var product_count_on_grid = product_data['countOnGrid'];\n                //         }\n\n                //         product_data['count'] = product_count_on_grid;\n                //     }\n\n                //     $.agni_builder_frontend_products_categories_tab($this, product_data);\n                // }\n\n                product_tab.on('click', function () {\n                    // var product_tab = $(this);\n                    product_tabs.removeClass('active');\n                    product_tab.addClass('active');\n\n                    if ((breakpoints['tab'] < window.innerWidth && window.innerWidth < breakpoints['laptop'])) {\n                        currentDevice = 'tab';\n                    }\n                    else if ((breakpoints['laptop'] < window.innerWidth && window.innerWidth < breakpoints['desktop'])) {\n                        currentDevice = 'laptop';\n                    }\n                    else if ((breakpoints['desktop'] < window.innerWidth)) {\n                        currentDevice = 'desktop';\n                    }\n\n                    product_data['totalProducts'] = product_data['count'];\n\n                    if (typeof product_data['carousel'] !== 'undefined' && !product_data['carousel']) {\n                        var product_count_on_grid = product_data['columns'][currentDevice] * product_data['rows'][currentDevice];\n\n                        product_data['count'] = product_count_on_grid;\n                    }\n\n                    $.agni_builder_frontend_products_categories_tab($this, product_data);\n                })\n            })\n\n\n        })\n\n\n        $.agni_products_carousel = function ($this) {\n\n            // $($this.clone()).insertAfter($this);\n\n            // $this.slick({\n            //     slidesToShow: 4\n            // })\n\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            var slidesToShowArray = $this.data('slick-slides-to-show');\n            var slidesPerRowArray = $this.data('slick-slides-per-row');\n\n\n            var responsive = [];\n            var slidesToShow = '';\n            var slidesPerRow = '';\n\n\n            Object.entries(breakpoints).forEach(function ([device, value]) {\n\n                if (device !== 'mobile') {\n                    responsive.push({\n                        breakpoint: parseInt(value),\n                        settings: {\n                            slidesToShow: parseInt(slidesToShowArray[device]),\n                            slidesPerRow: parseInt(slidesPerRowArray[device])\n                        }\n                    })\n                }\n                else {\n                    slidesToShow = parseInt(slidesToShowArray[device]);\n                    slidesPerRow = parseInt(slidesPerRowArray[device]);\n                }\n            });\n\n\n            $this.slick({\n                slidesToShow: slidesToShow,\n                slidesPerRow: slidesPerRow,\n                responsive: responsive,\n                mobileFirst: true,\n                nextArrow: '<span class=\"slick-next slick-arrow\"><i class=\"lni lni-chevron-right\"></i></span>',\n                prevArrow: '<span class=\"slick-prev slick-arrow\"><i class=\"lni lni-chevron-left\"></i></span>',\n                rtl: (document.dir === 'rtl')\n            })\n        }\n\n\n        $('.agni-products-carousel').each(function () {\n            $.agni_products_carousel($(this));\n        })\n\n\n\n        // $.agni_inline_products_carousel = function ($this) {\n\n        //     var breakpoints = agni_builder_frontend.breakpoints;\n\n        //     Object.entries(breakpoints).forEach(function ([device, value]) {\n\n        //         if (device == 'tab') {\n        //             if ($(window).width() < parseInt(value)) {\n\n        //                 $this.slick({\n        //                     dots: false,\n        //                     // // infinite: false,\n        //                     speed: 300,\n        //                     slidesToShow: 2,\n        //                     slidesToScroll: 1,\n        //                     centerMode: true,\n        //                     centerPadding: '20px',\n        //                     initialSlide: 1,\n        //                     nextArrow: '<span class=\"slick-next slick-arrow\"><i class=\"lni lni-chevron-right\"></i></span>',\n        //                     prevArrow: '<span class=\"slick-prev slick-arrow\"><i class=\"lni lni-chevron-left\"></i></span>',\n        //                 });\n        //             }\n        //         }\n        //     });\n        // }\n\n        $.agni_inline_products_scroll = (content, nav) => {\n            var $this = $(this);\n\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            Object.entries(breakpoints).forEach(function ([device, value]) {\n\n                if (device == 'tab') {\n                    if ($(window).width() < parseInt(value)) {\n\n                        var $table = content;\n                        var scrollMaxLeft = parseInt($table.innerWidth() - $table.parent().innerWidth()) * -1;\n\n                        // console.log(\"scroll max left\", scrollMaxLeft, scrollMaxLeft == 0);\n\n                        // if (scrollMaxLeft != 0) {\n\n                        var leftTimeout, rightTimeout;\n                        var left = nav.find('.nav-left');\n                        var right = nav.find('.nav-right');\n\n                        nav.removeClass('hide');\n\n                        function scrollLeft() {\n                            console.log(\"scroll left\", $table.scrollLeft());\n                            // document.getElementsByClassName('products')[0].scrollLeft -= 20;\n                            $table.scrollLeft($table.scrollLeft() - 300);\n                        }\n\n                        function scrollRight() {\n                            console.log(\"scroll left\", $table.scrollLeft());\n                            $table.scrollLeft($table.scrollLeft() + 300);\n                        }\n\n\n                        var scrollStartLeft = function (e) {\n                            var mouseClick = e.which;\n                            var eventType = e.type;\n                            if (mouseClick == '1' || eventType == 'touchstart') {\n                                scrollLeft();\n                                // leftTimeout = setInterval(function () {\n                                //     scrollLeft();\n                                // }, 5);\n\n                            }\n\n                            return false;\n                        }\n\n                        var scrollStartRight = function (e) {\n\n                            var mouseClick = e.which;\n                            var eventType = e.type;\n                            if (mouseClick == '1' || eventType == 'touchstart') {\n                                scrollRight();\n                                // leftTimeout = setInterval(function () {\n                                //     scrollRight();\n                                // }, 5);\n\n                            }\n\n                            return false;\n                        };\n\n                        var scrollStop = function (e) {\n                            // if (e.cancelable) {\n                            //     e.preventDefault();\n                            // }\n                            // console.log(\"triggered\", e.type)\n                            clearInterval(rightTimeout);\n                            clearInterval(leftTimeout);\n                            return false;\n                        };\n\n\n                        left.on('mousedown touchstart', scrollStartLeft);\n                        right.on('mousedown touchstart', scrollStartRight);\n\n                        $(document).on('mouseup', scrollStop);\n                        right.on('touchend', scrollStop);\n                        left.on('touchend', scrollStop);\n                        // $(document).on('touchcancel', scrollStop);\n                        // $(document).on('touchleave', scrollStop);\n                        // }\n\n                    }\n                }\n            });\n        }\n\n        // $.agni_inline_products_scroll = (content, nav) => {\n        //     var $this = $(this);\n\n        //     var breakpoints = agni_builder_frontend.breakpoints;\n\n        //     console.log(\"i'm reached here\")\n\n        //     Object.entries(breakpoints).forEach(function ([device, value]) {\n\n        //         if (device == 'tab') {\n        //             if ($(window).width() < parseInt(value)) {\n        //                 console.log(\"i'm inside tab\")\n\n        //                 var $table = content;\n        //                 var scrollMaxLeft = parseInt($table.innerWidth() - $table.parent().innerWidth()) * -1;\n\n        //                 // console.log(\"scroll max left\", scrollMaxLeft, scrollMaxLeft == 0);\n\n        //                 if (scrollMaxLeft != 0) {\n\n        //                     var leftTimeout, rightTimeout;\n        //                     var left = nav.find('.nav-left');\n        //                     var right = nav.find('.nav-right');\n\n        //                     nav.removeClass('hide');\n\n        //                     function scrollLeft() {\n        //                         var positionLeft = parseInt($table.css('left').split('px')[0]);\n\n        //                         if (positionLeft < 0 && (positionLeft + 5) >= scrollMaxLeft) {\n        //                             $table.css('left', parseInt($table.css('left').split('px')[0]) + 5);\n        //                         }\n        //                         // console.log(\"left\", $table.css('left'), parseInt($table.css('left').split('px')[0]) + 5);\n        //                         // console.log(\"table width\", $table.innerWidth());\n        //                         // console.log(\"table container width\", $table.parent().innerWidth());\n        //                     }\n\n        //                     function scrollRight() {\n        //                         var positionLeft = parseInt($table.css('left').split('px')[0]);\n        //                         if (positionLeft <= 0 && (positionLeft - 5) > scrollMaxLeft) {\n        //                             $table.css('left', (parseInt($table.css('left').split('px')[0]) - 5));\n        //                         }\n        //                         // console.log(\"left right\", $table.css('left'), parseInt($table.css('left').split('px')[0]) - 5);\n        //                         // console.log(\"table width\", $table.innerWidth());\n        //                         // console.log(\"table container width\", $table.parent().innerWidth());\n        //                     }\n\n\n        //                     var scrollStartLeft = function (e) {\n        //                         var mouseClick = e.which;\n        //                         var eventType = e.type;\n        //                         if (mouseClick == '1' || eventType == 'touchstart') {\n        //                             scrollLeft();\n        //                             leftTimeout = setInterval(function () {\n        //                                 scrollLeft();\n        //                             }, 5);\n\n        //                         }\n\n        //                         return false;\n        //                     }\n\n        //                     var scrollStartRight = function (e) {\n\n        //                         var mouseClick = e.which;\n        //                         var eventType = e.type;\n        //                         if (mouseClick == '1' || eventType == 'touchstart') {\n        //                             scrollRight();\n        //                             leftTimeout = setInterval(function () {\n        //                                 scrollRight();\n        //                             }, 5);\n\n        //                         }\n\n        //                         return false;\n        //                     };\n\n        //                     var scrollStop = function (e) {\n        //                         // if (e.cancelable) {\n        //                         //     e.preventDefault();\n        //                         // }\n        //                         // console.log(\"triggered\", e.type)\n        //                         clearInterval(rightTimeout);\n        //                         clearInterval(leftTimeout);\n        //                         return false;\n        //                     };\n\n\n        //                     left.on('mousedown touchstart', scrollStartLeft);\n        //                     right.on('mousedown touchstart', scrollStartRight);\n\n        //                     $(document).on('mouseup', scrollStop);\n        //                     right.on('touchend', scrollStop);\n        //                     left.on('touchend', scrollStop);\n        //                     // $(document).on('touchcancel', scrollStop);\n        //                     // $(document).on('touchleave', scrollStop);\n        //                 }\n\n        //                 // $this.slick({\n        //                 //     dots: false,\n        //                 //     // // infinite: false,\n        //                 //     speed: 300,\n        //                 //     slidesToShow: 2,\n        //                 //     slidesToScroll: 1,\n        //                 //     centerMode: true,\n        //                 //     centerPadding: '20px',\n        //                 //     initialSlide: 1,\n        //                 //     nextArrow: '<span class=\"slick-next slick-arrow\"><i class=\"lni lni-chevron-right\"></i></span>',\n        //                 //     prevArrow: '<span class=\"slick-prev slick-arrow\"><i class=\"lni lni-chevron-left\"></i></span>',\n        //                 // });\n        //             }\n        //         }\n        //     });\n        // }\n\n        $('.agni-block-products').each(function () {\n            // var products = $(this).find('.has-inline-products');\n            // $.agni_inline_products_carousel(products);\n            var $this = $(this);\n            if ($this.hasClass('has-scroll-navigation-mobile')) {\n                var content = $this.find('.agni-block-products-contents>ul'),\n                    nav = $this.find('.agni-block-products-nav');\n\n                $.agni_inline_products_scroll(content, nav);\n            }\n        })\n\n        $('.agni-block-products-categories').each(function () {\n            // var products = $(this).find('.has-inline-categories');\n            // $.agni_inline_products_carousel(products);\n            var $this = $(this);\n            if ($this.hasClass('has-scroll-navigation-mobile')) {\n                var content = $this.find('.agni-block-products-categories-contents>ul'),\n                    nav = $this.find('.agni-block-products-categories-nav');\n\n                $.agni_inline_products_scroll(content, nav);\n            }\n        })\n\n        $.agni_woocommerce_product_photoswipe = {\n            product_gallery_lightbox: function ($this) {\n                //var product_gallery = $('.woocommerce-product-gallery');\n\n                $this.photoswipeimage({\n                    getThumbBoundsFn: function () {\n                        return false;\n                    },\n                    bgOpacity: 1,\n                    loop: true,\n                    shareEl: false,\n                    //thumb: true, //added by agnihd\n                });\n\n            },\n\n            photoswipe_wrapper: function () {\n\n                var $pswp_wrapper = '<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"><div class=\"pswp__bg\"></div><div class=\"pswp__scroll-wrap\"><div class=\"pswp__container\"><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div><div class=\"pswp__item\"></div></div><div class=\"pswp__ui pswp__ui--hidden\"><div class=\"pswp__top-bar pswp--svg\"><div class=\"pswp__counter\"></div><button class=\"pswp__button pswp__button--close\" title=\"Close (Esc)\"></button><button class=\"pswp__button pswp__button--fs\" title=\"Toggle fullscreen\"></button><button class=\"pswp__button pswp__button--zoom\" title=\"Zoom in/out\"></button><div class=\"pswp__preloader\"><div class=\"pswp__preloader__icn\"><div class=\"pswp__preloader__cut\"><div class=\"pswp__preloader__donut\"></div></div></div></div></div><button class=\"pswp__button pswp__button--arrow--left\" title=\"Previous (arrow left)\"> </button><button class=\"pswp__button pswp__button--arrow--right\" title=\"Next (arrow right)\"> </button><div class=\"pswp__caption\"><div class=\"pswp__caption__center\"></div></div></div></div></div>';\n                $('body').append($pswp_wrapper);\n            }\n        }\n\n        $('.agni-block-gallery').each(function () {\n            var $this = $(this);\n\n            if ($this.hasClass('has-lightbox')) {\n\n                $.agni_woocommerce_product_photoswipe.photoswipe_wrapper();\n                $.agni_woocommerce_product_photoswipe.product_gallery_lightbox($this.find('ul'));\n\n            }\n\n        })\n\n        $.fn.agni_block_carousel = function () {\n            var $this = $(this);\n            var breakpoints = agni_builder_frontend.breakpoints;\n\n            var slidesToShowArray = $this.data('slick-slides-to-show');\n            var slickOptions = JSON.parse(JSON.parse($this.data('slick')));\n\n            var responsive = [];\n            var slidesToShow = '';\n\n            var options = {\n                mobileFirst: true,\n                adaptiveHeight: true,\n                nextArrow: '<span class=\"slick-next slick-arrow\"><i class=\"lni lni-chevron-right\"></i></span>',\n                prevArrow: '<span class=\"slick-prev slick-arrow\"><i class=\"lni lni-chevron-left\"></i></span>',\n            }\n\n            if (typeof slidesToShowArray != 'undefined') {\n                Object.entries(breakpoints).forEach(function ([device, value]) {\n\n                    if (device !== 'mobile') {\n                        responsive.push({\n                            breakpoint: parseInt(value),\n                            settings: {\n                                slidesToShow: parseInt(slidesToShowArray[device]),\n                            }\n                        })\n                    }\n                    else {\n                        slidesToShow = parseInt(slidesToShowArray[device]);\n                    }\n                });\n\n                options['slidesToShow'] = slidesToShow;\n                options['responsive'] = responsive;\n            }\n            options = $.extend(options, slickOptions);\n            // console.log(\"slick options, \", options);\n\n            options['rtl'] = (document.dir === 'rtl'); // Adding RTL support\n\n            $this.slick(options);\n        }\n\n        $('.agni-block-has-carousel').each(function () {\n            $(this).agni_block_carousel();\n        })\n\n\n        if ($('.agni-block-instagram').length !== 0) {\n            var instagramWrapper = $('.agni-block-instagram');\n            var access_token = agni_builder_frontend.instagram_token;\n\n            if (!access_token) {\n                instagramWrapper.html('No access token found. Make sure that you\\'ve added at \"Appearance->Customize->Cartify Theme Options->API Keys\"');\n\n                return null;\n            }\n            // console.log(\"instagram\", instagramWrapper);\n            // console.log(\"instagram api called\");\n\n            // instagramWrapper.each(function (insta) {\n            //     console.log(\"each data\", insta)\n            // })\n\n            var data = {\n                fields: 'id, username',\n                access_token\n            };\n            var mediaData = {\n                fields: 'caption, id, media_type, media_url, permalink, thumbnail_url, username, timestamp',\n                access_token\n            }\n\n            // var userData = [];\n\n            var userData = $.ajax({\n                type: 'GET',\n                url: 'https://graph.instagram.com/me/media',\n                data,\n                dataType: 'json',\n                async: false,\n                success: function (res) {\n                    // console.log(\"res\", res);\n                    var resData = res.data;\n                    // userData = resData;\n                    // var slicedRes = resData.slice(0, options.count)\n                    // console.log(\"res data\", resData);\n\n                    return resData;\n\n                },\n                error: function (err) {\n                    var response = JSON.parse(err.responseText)\n\n                    instagramWrapper.html(response.error.message)\n                }\n\n            });\n\n            var userJSONData = userData.responseJSON.data;\n            var countsList = [];\n            var captionsList = [];\n\n            instagramWrapper.each(function () {\n                var $this = $(this);\n                var options = $this.data('options');\n\n                captionsList.push(options.filterByCaption);\n                countsList.push(options.count);\n            })\n\n\n            if (!userJSONData) {\n                return null;\n            }\n\n\n\n            // console.log(\"user data\", userData.responseJSON.data);\n            // console.log(\"media countt\", countsList, Math.max(...countsList));\n\n            // var slicedUserJSONData = userJSONData.slice(0, Math.max(...countsList));\n            var slicedUserJSONData = userJSONData;\n            var totalCounts = 0;\n            var instagramMedia = [];\n            if (slicedUserJSONData) {\n                // $this.prepend('<ul class=\"agni-block-instagram-items\"></ul>');\n                slicedUserJSONData.forEach(media => {\n\n                    // var $li = $('<li/>');\n                    // $this.find('ul').append($li);\n                    if (totalCounts < Math.max(...countsList)) {\n\n                        var mediaResData = $.ajax({\n                            type: 'GET',\n                            url: 'https://graph.instagram.com/' + media.id,\n                            data: mediaData,\n                            dataType: 'json',\n                            async: false,\n                            success: function (res) {\n                                // console.log(\"sliced res\", res);\n\n                                var mediaCaption = res.caption;\n\n                                var hasCaption = captionsList.some(function (caption) { return mediaCaption.indexOf(caption) >= 0; });\n                                if (hasCaption) {\n                                    // There's at least one\n                                    totalCounts = totalCounts + 1;\n                                }\n\n                                return res.data;\n\n                            }\n                        });\n\n                        instagramMedia.push(mediaResData.responseJSON);\n                    }\n                });\n\n\n\n                instagramWrapper.each(function () {\n                    var $this = $(this);\n                    var $ul = $this.find('ul.agni-block-instagram-items');\n                    var options = $this.data('options');\n\n                    // var res = instagramMedia[index]\n                    // if ($ul.hasClass('slick-initialized')) {\n                    //     $ul.slick('unslick');\n                    // }\n\n                    var instagramMediaFilteredByCaption = instagramMedia.filter(function (media) {\n                        if (options.filterByCaption && options.filterByCaption.length > 0) {\n                            var mediaCaption = media.caption;\n                            return mediaCaption.includes(options.filterByCaption);\n                        }\n\n                        return true;\n                    })\n\n\n                    var slicedArray = instagramMediaFilteredByCaption.slice(0, options.count);\n\n                    // console.log(\"sliced array\", slicedArray);\n                    // var slicedRes = resData.slice(0, options.count)\n\n                    var itemsProcessed = 0;\n\n                    function asyncFunction(media, cb) {\n                        setTimeout(() => {\n                            var res = media;\n                            var $li = $('<li/>');\n                            $this.find('ul.agni-block-instagram-items').append($li);\n\n                            var $html = '';\n                            $html += '<a href=\"' + res.permalink + '\" target=\"' + options.linkTarget + '\">';\n                            $html += '<figure>';\n                            $html += '<img width=\"1080\" height=\"1080\" src=\"' + res.media_url + '\" alt=\"' + res.caption + '\" />';\n                            if (options.caption) {\n                                $html += '<figcaption>' + res.caption + '</figcaption>';\n                            }\n                            $html += '</figure>';\n                            $html += '</a>';\n\n                            $li.append($html);\n                            cb();\n                        }, 100);\n                    }\n\n                    slicedArray.forEach(function (media, index, array) {\n                        asyncFunction(media, () => {\n                            itemsProcessed++;\n                            if (itemsProcessed === array.length) {\n                                if ($ul.hasClass('agni-block-has-carousel')) {\n                                    if ($ul.hasClass('slick-initialized')) {\n                                        $ul.slick('unslick');\n                                    }\n                                    $ul.agni_block_carousel();\n                                }\n                            }\n                        });\n                    })\n                })\n\n                // console.log(\"response json\", instagramMedia);\n\n                // var mediaResJSONData = mediaResData.responseJSON\n            }\n        }\n\n\n\n        $.fn.agniToggle = function (accordion = false) {\n            var panels = $(this);\n            panels.each(function () {\n                var panel = $(this);\n                panel.find('.agni-block-toggle-title').on('click', function () {\n\n                    if (accordion) {\n                        panels.not(panel).removeClass('active');\n                    }\n\n                    if (panel.hasClass('active')) {\n                        panel.removeClass('active');\n                    }\n                    else {\n                        panel.addClass('active');\n                    }\n                })\n            })\n        }\n\n\n        // Accordion\n        $('.agni-block-accordion').each(function () {\n            var $this = $(this);\n            var panels = $this.find('>div');\n            panels.agniToggle(true);\n        })\n\n        // Agni Toggle\n        $('.agni-block-toggle:not(.child)').agniToggle();\n\n        $.fn.agniTabs = function () {\n            var $this = $(this);\n\n            var tabTitles = $this.find('.agni-block-tab-title');\n            var tabContents = $this.find('.agni-block-tab');\n\n            // console.log(tabTitles, tabContents);\n\n            tabTitles.each(function (index) {\n                var tabTitle = $(this);\n                var tabIndex = index;\n\n                tabTitle.on('click', function () {\n                    tabTitles.removeClass('active');\n                    tabTitle.addClass('active');\n                    // tabContents.not('.active').addClass('')\n                    tabContents.removeClass('active');\n                    tabContents.each(function (index) {\n                        if (index === tabIndex) {\n                            $(this).addClass('active');\n                        }\n                    })\n                })\n            })\n        }\n\n\n        // Agni tabs\n        $('.agni-block-tabs').each(function () {\n            $(this).agniTabs();\n        })\n\n        // Agni video\n        $('.agni-block-video').each(function () {\n            var $this = $(this);\n\n            if ($this.hasClass('provider-youtube')) {\n                $this.find('.agni-block-video-controls > button').on('click', function () {\n                    var $button = $(this);\n\n                    if ($button.hasClass('agni-block-video-controls--play')) {\n                        $button.trigger('agniYoutubePlay');\n                        $this.addClass('initiated');\n                    }\n                    if ($button.hasClass('agni-block-video-controls--pause')) {\n                        $button.trigger('agniYoutubePause');\n                    }\n\n                })\n            }\n\n            if ($this.hasClass('provider-vimeo')) {\n                $this.find('.agni-block-video-controls > button').on('click', function () {\n                    var $button = $(this);\n                    var $player = $this.find('iframe');\n\n                    if ($button.hasClass('agni-block-video-controls--play')) {\n                        $player.play_video();\n                        $this.addClass('initiated');\n                    }\n                    if ($button.hasClass('agni-block-video-controls--pause')) {\n                        $player.pause_video();\n                    }\n                })\n            }\n            if ($this.hasClass('provider-self')) {\n                $this.find('.agni-block-video-controls > button').on('click', function () {\n                    var $button = $(this);\n                    var $player = $this.find('video')[0];\n\n                    if ($button.hasClass('agni-block-video-controls--play')) {\n                        $player.play();\n                        $this.addClass('initiated');\n                    }\n                    if ($button.hasClass('agni-block-video-controls--pause')) {\n                        $player.pause();\n                    }\n                })\n            }\n        })\n\n\n        $.fn.play_video = function () {\n            var player = $(this)[0]; //document.getElementById(\"agni-video-2\");\n            var data = { method: \"play\" };\n            player.contentWindow.postMessage(JSON.stringify(data), \"*\");\n        }\n\n        $.fn.pause_video = function () {\n            var player = $(this)[0];\n            var data = { method: \"pause\" };\n            player.contentWindow.postMessage(JSON.stringify(data), \"*\");\n        }\n\n\n        $('.agni-block-hotspot').each(function () {\n            var $this = $(this),\n                spots = $this.find('.agni-block-hotspot__spot');\n            // icon = spot.find('.agni-block-hotspot__spot-icon');\n\n\n            var spot_product_container = '<div class=\"agni-block-hotspot-product product\"></div>';\n            var spot_loader = '<div class=\"loader\">Loading!</div>';\n\n            spots.each(function () {\n                var spot = $(this);\n                var icon = spot.find('.agni-block-hotspot__spot-icon');\n                var product_ids = spot.data('product-ids');\n\n                if (!product_ids) {\n                    return null;\n                }\n\n\n                var product_data = {\n                    ids: product_ids\n                };\n\n                icon.on('click', function () {\n\n                    var spot_content_loaded = spot.find('.agni-block-hotspot-product').children().length;\n\n                    if (spot_content_loaded !== 0) {\n                        if (spot.hasClass('hidden')) {\n                            spot.removeClass('hidden');\n                        }\n                        else {\n                            spot.addClass('hidden')\n                        }\n                    }\n                    else {\n                        spot.append(spot_product_container);\n                        spot.find('.agni-block-hotspot-product').append(spot_loader);\n\n                        spot.addClass('loading');\n\n                        $.ajax({\n                            url: agni_builder_frontend.ajaxurl_wc.toString().replace('%%endpoint%%', 'agni_builder_hotspot'),\n                            type: 'POST',\n                            data: product_data,\n                            success: function (response) {\n                                // console.log(response);\n                                if (!response) {\n                                    return;\n                                }\n\n                                spot.removeClass('loading');\n\n                                spot.find('.agni-block-hotspot-product').html(response);\n                                // spot.append(spot_product_container);\n\n\n                                // var data = {};\n\n                                // data['add-to-cart'] = product_id;\n\n                                $('.ajax_add_to_cart').on('click', function (e) {\n                                    e.preventDefault();\n                                    // console.log(\"Clicked\", product_id);\n                                    // $(document.body).trigger('adding_to_cart', [$(this), { product_id: product_id }]);\n                                    $.add_to_cart($(this), { product_id: product_ids });\n\n                                });\n                                // $('.agni-block-products-categories-tab__contents').html(response);\n                            }\n                        })\n                    }\n                })\n            })\n\n        });\n\n\n        $.fn.initializeMap_v2 = function (id, { locations, mapStyle, zoom, markerIcon }) {\n\n            var map = new google.maps.Map(document.getElementById(id), {\n                zoom: zoom,\n                center: new google.maps.LatLng(locations[0].lat, locations[0].lng),\n                mapTypeControl: false,\n                mapTypeControlOptions: {\n                    mapTypeIds: ['Styled']\n                },\n                navigationControl: true,\n                navigationControlOptions: { style: google.maps.NavigationControlStyle.SMALL },\n                mapTypeId: 'Styled',\n            });\n            var styledMapType = new google.maps.StyledMapType(mapStyles[mapStyle], { name: 'Styled' });\n            map.mapTypes.set('Styled', styledMapType);\n\n            var infowindow = new google.maps.InfoWindow();\n\n            var mapMarker = {\n                url: markerIcon || agni_builder_frontend.map_marker,\n                size: new google.maps.Size(50, 70),\n                origin: new google.maps.Point(0, 0),\n                scaledSize: new google.maps.Size(25, 35)\n            };\n\n            var marker, i;\n\n            for (i = 0; i < locations.length; i++) {\n                marker = new google.maps.Marker({\n                    position: new google.maps.LatLng(locations[i].lat, locations[i].lng),\n                    map: map,\n                    icon: mapMarker,\n                    title: locations[i].location,\n                    zIndex: 3\n                });\n\n                google.maps.event.addListener(marker, 'click', (function (marker, i) {\n                    return function () {\n                        infowindow.setContent(\"<h6>\" + locations[i].location + \"</h6>\" + locations[i].address);\n                        infowindow.open(map, marker);\n                    }\n                })(marker, i));\n            }\n        }\n\n\n        $('.agni-block-map').each(function () {\n\n            var $element = $(this);\n            var id = $element.attr('id');\n\n\n            if (typeof google == 'undefined') {\n                $element.html('No api key found. Make sure that you\\'ve added at \"Appearance->Customize->Cartify Theme Options->API Keys\"');\n\n                return null;\n            }\n\n            var options = $element.data('options');\n\n            $element.initializeMap_v2(id, options);\n        })\n\n\n\n        // Animation \n        const Obs = new IntersectionObserver((entries, observer) => {\n            entries.forEach(entry => {\n                entry.isIntersecting ? entry.target.classList.add(\"has-animation-in-viewport\") : ''\n            });\n        });\n\n        $('.has-animation').each(function () {\n            var $this = $(this);\n            var el = $this[0];\n\n            var elOptions = $this.data('animation-options') || {};\n\n            Obs.observe(el, elOptions);\n        });\n\n\n    })\n})(jQuery);\n\n\n\nvar mapStyles = { \"1\": [{ \"stylers\": [{ \"hue\": \"#ff1a00\" }, { \"invert_lightness\": true }, { \"saturation\": -100 }, { \"lightness\": 33 }, { \"gamma\": 0.5 }] }, { \"featureType\": \"water\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#2D333C\" }] }], \"2\": [{ \"featureType\": \"administrative\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"color\": \"#444444\" }] }, { \"featureType\": \"landscape\", \"elementType\": \"all\", \"stylers\": [{ \"color\": \"#f2f2f2\" }] }, { \"featureType\": \"poi\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"road\", \"elementType\": \"all\", \"stylers\": [{ \"saturation\": -100 }, { \"lightness\": 45 }] }, { \"featureType\": \"road.highway\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"simplified\" }] }, { \"featureType\": \"road.arterial\", \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit\", \"elementType\": \"all\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"water\", \"elementType\": \"all\", \"stylers\": [{ \"color\": \"#1e1e20\" }, { \"visibility\": \"on\" }] }], \"3\": [{ \"featureType\": \"all\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"saturation\": 36 }, { \"color\": \"#000000\" }, { \"lightness\": 40 }] }, { \"featureType\": \"all\", \"elementType\": \"labels.text.stroke\", \"stylers\": [{ \"visibility\": \"on\" }, { \"color\": \"#000000\" }, { \"lightness\": 16 }] }, { \"featureType\": \"all\", \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"administrative\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 20 }] }, { \"featureType\": \"administrative\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 17 }, { \"weight\": 1.2 }] }, { \"featureType\": \"landscape\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 20 }] }, { \"featureType\": \"poi\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 21 }] }, { \"featureType\": \"road.highway\", \"elementType\": \"geometry.fill\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 17 }] }, { \"featureType\": \"road.highway\", \"elementType\": \"geometry.stroke\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 29 }, { \"weight\": 0.2 }] }, { \"featureType\": \"road.arterial\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 18 }] }, { \"featureType\": \"road.local\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 16 }] }, { \"featureType\": \"transit\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 19 }] }, { \"featureType\": \"water\", \"elementType\": \"geometry\", \"stylers\": [{ \"color\": \"#000000\" }, { \"lightness\": 17 }] }], \"4\": [{ \"featureType\": \"landscape\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"transit\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"poi\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"water\", \"elementType\": \"labels\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"featureType\": \"road\", \"elementType\": \"labels.icon\", \"stylers\": [{ \"visibility\": \"off\" }] }, { \"stylers\": [{ \"hue\": \"#00aaff\" }, { \"saturation\": -100 }, { \"gamma\": 2.15 }, { \"lightness\": 12 }] }, { \"featureType\": \"road\", \"elementType\": \"labels.text.fill\", \"stylers\": [{ \"visibility\": \"on\" }, { \"lightness\": 24 }] }, { \"featureType\": \"road\", \"elementType\": \"geometry\", \"stylers\": [{ \"lightness\": 57 }] }] };"],"file":"scripts.js"}
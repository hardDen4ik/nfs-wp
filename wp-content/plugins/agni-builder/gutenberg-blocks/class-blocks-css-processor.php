<?php 

add_filter( 'agni_gutenberg_blocks_css', 'agni_builder_gutenberg_blocks_css', 10, 2 );

add_filter( 'agni_gutenberg_blocks_css_block_processor', 'agni_builder_gutenberg_blocks_css_block_processor', 10, 2 );

add_filter( 'agni_gutenberg_blocks_css_spacing_parser', 'agni_builder_gutenberg_blocks_css_spacing_parser', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_parser', 'agni_builder_gutenberg_blocks_css_parser', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_array_parser', 'agni_builder_gutenberg_blocks_css_array_parser', 10, 2 );

add_filter( 'agni_gutenberg_blocks_css_columns', 'agni_builder_gutenberg_blocks_css_columns', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_column', 'agni_builder_gutenberg_blocks_css_column', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_group', 'agni_builder_gutenberg_blocks_css_group', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_slider', 'agni_builder_gutenberg_blocks_css_slider', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_heading', 'agni_builder_gutenberg_blocks_css_heading', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_paragraph', 'agni_builder_gutenberg_blocks_css_paragraph', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_divider', 'agni_builder_gutenberg_blocks_css_divider', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_separator', 'agni_builder_gutenberg_blocks_css_separator', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_spacer', 'agni_builder_gutenberg_blocks_css_spacer', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_list', 'agni_builder_gutenberg_blocks_css_list', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_map', 'agni_builder_gutenberg_blocks_css_map', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_buttons', 'agni_builder_gutenberg_blocks_css_buttons', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_button', 'agni_builder_gutenberg_blocks_css_button', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_icons', 'agni_builder_gutenberg_blocks_css_icons', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_icon', 'agni_builder_gutenberg_blocks_css_icon', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_banners', 'agni_builder_gutenberg_blocks_css_banners', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_banner', 'agni_builder_gutenberg_blocks_css_banner', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_images', 'agni_builder_gutenberg_blocks_css_images', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_image', 'agni_builder_gutenberg_blocks_css_image', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_video', 'agni_builder_gutenberg_blocks_css_video', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_cards', 'agni_builder_gutenberg_blocks_css_cards', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_card', 'agni_builder_gutenberg_blocks_css_card', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_icon_cards', 'agni_builder_gutenberg_blocks_css_icon_cards', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_icon_card', 'agni_builder_gutenberg_blocks_css_icon_card', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_text_cards', 'agni_builder_gutenberg_blocks_css_text_cards', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_text_card', 'agni_builder_gutenberg_blocks_css_text_card', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_hotspot', 'agni_builder_gutenberg_blocks_css_hotspot', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_testimonials', 'agni_builder_gutenberg_blocks_css_testimonials', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_testimonial', 'agni_builder_gutenberg_blocks_css_testimonial', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_toggle', 'agni_builder_gutenberg_blocks_css_toggle', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_accordion', 'agni_builder_gutenberg_blocks_css_accordion', 10, 2 );
// add_filter( 'agni_gutenberg_blocks_css_tab', 'agni_builder_gutenberg_blocks_css_tab', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_tabs', 'agni_builder_gutenberg_blocks_css_tabs', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_instagram', 'agni_builder_gutenberg_blocks_css_instagram', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_recently_viewed_products', 'agni_builder_gutenberg_blocks_css_recently_viewed_products', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_products', 'agni_builder_gutenberg_blocks_css_products', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_products_tab', 'agni_builder_gutenberg_blocks_css_products_tab', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_products_categories', 'agni_builder_gutenberg_blocks_css_products_categories', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_products_categories_tab', 'agni_builder_gutenberg_blocks_css_products_categories_tab', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_products_brands', 'agni_builder_gutenberg_blocks_css_products_brands', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_posts', 'agni_builder_gutenberg_blocks_css_posts', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_portfolio', 'agni_builder_gutenberg_blocks_css_portfolio', 10, 2 );
add_filter( 'agni_gutenberg_blocks_css_menu', 'agni_builder_gutenberg_blocks_css_menu', 10, 2 );


function agni_builder_gutenberg_blocks_css( $blocks, $block_classname = '' ){
    $styles = '';

    // print_r($blocks);

    foreach ($blocks as $key => $block) {
        # code...
        // print_r( $block );
        $block_classname = isset( $block['attrs']['customClassName'] ) ? ' .' . $block['attrs']['customClassName'] : $block_classname;
        $styles .= apply_filters( 'agni_gutenberg_blocks_css_block_processor', $block, $block_classname );
            
        if( !empty( $block['innerBlocks'] ) ){
            // $block_classname = isset( $block['attrs']['customClassName'] ) ? ' .' . $block['attrs']['customClassName'] : $block_classname;
            $styles .= apply_filters( 'agni_gutenberg_blocks_css', $block['innerBlocks'], $block_classname );
        }
    }

    

    return $styles;
}


function agni_builder_gutenberg_blocks_css_block_processor( $block, $block_classname ){
    $styles = '';


    $block_namespace = 'agni';
        
    if( strpos( $block['blockName'], $block_namespace ) !== false ){
        $blockname = str_replace( $block_namespace . '/', '', $block['blockName'] );


        // Spacing css
        $styles .= apply_filters( 'agni_gutenberg_blocks_css_spacing_parser', $block['attrs'], $block_classname );

        switch( $blockname ){
            case 'columns':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_columns', $block['attrs'], $block_classname );
                break;
            case 'column':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_column', $block['attrs'], $block_classname );
                break;
            case 'group':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_group', $block['attrs'], $block_classname );
                break;
            case 'slider':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_slider', $block['attrs'], $block_classname );
                break;
            case 'heading': 
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_heading', $block['attrs'], $block_classname );
                break;
            case 'paragraph': 
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_paragraph', $block['attrs'], $block_classname );
                break;
            case 'divider': 
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_divider', $block['attrs'], $block_classname );
                break;
            case 'separator': 
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_separator', $block['attrs'], $block_classname );
                break;
            case 'spacer': 
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_spacer', $block['attrs'], $block_classname );
                break;
            case 'list':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_list', $block['attrs'], $block_classname );
                break;
            case 'map': 
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_map', $block['attrs'], $block_classname );
                break;
            case 'buttons':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_buttons', $block['attrs'], $block_classname );
                break;
            case 'button':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_button', $block['attrs'], $block_classname );
                break;
            case 'icons':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_icons', $block['attrs'], $block_classname );
                break;
            case 'icon':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_icon', $block['attrs'], $block_classname );
                break;
            case 'banners':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_banners', $block['attrs'], $block_classname );
                break;
            case 'banner':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_banner', $block['attrs'], $block_classname );
                break;
            case 'images':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_images', $block['attrs'], $block_classname );
                break;
            case 'image':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_image', $block['attrs'], $block_classname );
                break;
            case 'video':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_video', $block['attrs'], $block_classname );
                break;
            case 'card':
                // $styles .= apply_filters( 'agni_gutenberg_blocks_css_parser', $block['attrs'], $block_classname );
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_card', $block['attrs'], $block_classname );
                break;
            case 'cards':
                // $styles .= apply_filters( 'agni_gutenberg_blocks_css_parser', $block['attrs'], $block_classname );
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_cards', $block['attrs'], $block_classname );
                break;
            case 'icon-card':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_icon_card', $block['attrs'], $block_classname );
                break;
            case 'icon-cards':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_icon_cards', $block['attrs'], $block_classname );
                break;
            case 'text-card':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_text_card', $block['attrs'], $block_classname );
                break;
            case 'text-cards':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_text_cards', $block['attrs'], $block_classname );
                break;
            case 'hotspot':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_hotspot', $block['attrs'], $block_classname );
                break;
            case 'testimonials':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_testimonials', $block['attrs'], $block_classname );
                break;
            case 'testimonial':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_testimonial', $block['attrs'], $block_classname );
                break;
            case 'toggle':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_toggle', $block['attrs'], $block_classname );
                break;
            case 'accordion':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_accordion', $block['attrs'], $block_classname );
                break;
            case 'tabs':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_tabs', $block['attrs'], $block_classname );
                break;
            case 'instagram':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_instagram', $block['attrs'], $block_classname );
                break;
            case 'products':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_products', $block['attrs'], $block_classname );
                break;
            case 'products-categories':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_products_categories', $block['attrs'], $block_classname );
                break;
            case 'products-tab':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_products_tab', $block['attrs'], $block_classname );
                break;
            case 'products-categories-tab':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_products_categories_tab', $block['attrs'], $block_classname );
                break;
            case 'products-brands':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_products_brands', $block['attrs'], $block_classname );
                break;
            case 'recently-viewed-products':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_recently_viewed_products', $block['attrs'], $block_classname );
                break;
            case 'posts':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_posts', $block['attrs'], $block_classname );
                break;
            case 'portfolio':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_portfolio', $block['attrs'], $block_classname );
                break;
            case 'menu':
                $styles .= apply_filters( 'agni_gutenberg_blocks_css_menu', $block['attrs'], $block_classname );

        }
    }

    return $styles;
}

if( !function_exists('agni_builder_gutenberg_blocks_css_columns') ){
    function agni_builder_gutenberg_blocks_css_columns( $block_settings, $block_classname ){
        $styles = '';

        $width = isset( $block_settings['width'] ) ? $block_settings['width'] : 'container';
        $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
        $overflow = isset( $block_settings['overflow'] ) ? $block_settings['overflow'] : '';
        $z_index = isset( $block_settings['zIndex'] ) ? $block_settings['zIndex'] : '';

        $background_clip = isset( $block_settings['backgroundClip'] ) ? $block_settings['backgroundClip'] : false;
        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '';
        $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';

        $animation_delay = isset( $block_settings['animationDelay'] ) ? $block_settings['animationDelay'] : '';
        $animation_duration = isset( $block_settings['animationDuration'] ) ? $block_settings['animationDuration'] : '';

        $devices = array( 1440, 1200, 1024, 667 );

        if( !($width === 'wide' || $width === 'full' || $width === 'container') ){

            $columns_min_width = intval($width) + 40;
            $columns_margin_left = intval($width) / 2;

            foreach ($devices as $value) {
                if( intval($width) < $value ){
                    $columns_min_width = $value;
                }
            }

            $styles .= "
            @media (min-width: {$columns_min_width}px){
                {$block_classname}{
                    left: 50%;
                    max-width: {$width}px;
                    margin-left: -{$columns_margin_left}px;
                }
            }
            ";
        }

        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }
        
        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_columns_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_columns_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_columns_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_columns_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_columns_height' => $height,
                '--agni_block_columns_overflow' => $overflow,
                '--agni_block_columns_z_index' => $z_index,

                '--agni_block_columns_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_columns_background_color' => $background_color,
                '--agni_block_columns_background_gradient' => $background_gradient,
                '--agni_block_columns_border_color' => $border_color,
                '--agni_block_columns_background_url' => 'url(' . $background_url . ')',
                '--agni_block_columns_background_size' => $background_size,
                '--agni_block_columns_background_position' => $background_position,
                '--agni_block_columns_background_repeat' => $background_repeat,
                '--agni_block_columns_radius' => $border_radius,
            ));
        $styles .= "}";

        
        $styles .= "{$block_classname}.has-animation {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--cartify_animation_delay' => $animation_delay,
                '--cartify_animation_duration' => $animation_duration
            ));
        $styles .= "}";
        
        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_column' ) ){
    function agni_builder_gutenberg_blocks_css_column( $block_settings, $block_classname ){
        $styles = '';

        $width = isset( $block_settings['width'] ) ? $block_settings['width'] : '';
        $overflow = isset( $block_settings['overflow'] ) ? $block_settings['overflow'] : '';
        $order = isset( $block_settings['order'] ) ? $block_settings['order'] : '';
        $hidden = isset( $block_settings['hidden'] ) ? $block_settings['hidden'] : '';
        $z_index = isset( $block_settings['zIndex'] ) ? $block_settings['zIndex'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '';

        $animation_delay = isset( $block_settings['animationDelay'] ) ? $block_settings['animationDelay'] : '';
        $animation_duration = isset( $block_settings['animationDuration'] ) ? $block_settings['animationDuration'] : '';

        if( !empty( $width ) ){
            $styles .= "{$block_classname}{";
                $styles .= agni_builder_prepare_css_styles(array(
                    '--agni_block_column_width_desktop' => isset($width['desktop']) ? $width['desktop'] : '',
                    '--agni_block_column_width_laptop' => isset($width['laptop']) ? $width['laptop'] : '',
                    '--agni_block_column_width_tab' => isset($width['tab']) ? $width['tab'] : '',
                    '--agni_block_column_width_mobile' => isset($width['mobile']) ? $width['mobile'] : '',
                ));
            $styles .= "}";
        }
        
        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }

    
        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_column_overflow' => $overflow,
                '--agni_block_column_z_index' => $z_index,

                '--agni_block_column_hidden_desktop' => (isset($hidden['desktop']) && $hidden['desktop']) ? 'none' : '',
                '--agni_block_column_hidden_laptop' => (isset($hidden['laptop']) && $hidden['laptop']) ? 'none' : '',
                '--agni_block_column_hidden_tab' => (isset($hidden['tab']) && $hidden['tab']) ? 'none' : '',
                '--agni_block_column_hidden_mobile' => (isset($hidden['mobile']) && $hidden['mobile']) ? 'none' : '',

                '--agni_block_column_order_desktop' => isset($order['desktop']) ? $order['desktop'] : '',
                '--agni_block_column_order_laptop' => isset($order['laptop']) ? $order['laptop'] : '',
                '--agni_block_column_order_tab' => isset($order['tab']) ? $order['tab'] : '',
                '--agni_block_column_order_mobile' => isset($order['mobile']) ? $order['mobile'] : '',

                '--agni_block_column_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_column_background_color' => $background_color,
                '--agni_block_column_background_gradient' => $background_gradient,
                '--agni_block_column_border_color' => $border_color,
                '--agni_block_column_background_url' => 'url(' . $background_url . ')',
                '--agni_block_column_background_size' => $background_size,
                '--agni_block_column_background_position' => $background_position,
                '--agni_block_column_background_repeat' => $background_repeat,
                '--agni_block_column_radius' => $border_radius,
            ));
        $styles .= "}";

            
        $styles .= "{$block_classname}.has-animation {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--cartify_animation_delay' => $animation_delay,
                '--cartify_animation_duration' => $animation_duration
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_group' ) ){
    function agni_builder_gutenberg_blocks_css_group( $block_settings, $block_classname ){
        $styles = '';

        $width = isset( $block_settings['width'] ) ? $block_settings['width'] : '';
        $overflow = isset( $block_settings['overflow'] ) ? $block_settings['overflow'] : '';
        $order = isset( $block_settings['order'] ) ? $block_settings['order'] : '';
        $hidden = isset( $block_settings['hidden'] ) ? $block_settings['hidden'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '';

        $animation_delay = isset( $block_settings['animationDelay'] ) ? $block_settings['animationDelay'] : '';
        $animation_duration = isset( $block_settings['animationDuration'] ) ? $block_settings['animationDuration'] : '';
        
        $width = empty($width) ? 'container' : $width;


        $devices = array( 1440, 1200, 1024, 667 );

        if( !($width === 'wide' || $width === 'full' || $width === 'container') ){

            $columns_min_width = intval($width) + 40;
            $columns_margin_left = intval($width) / 2;

            foreach ($devices as $value) {
                if( intval($width) < $value ){
                    $columns_min_width = $value;
                }
            }

            if( intval($width) > 1400 ){
                $styles .= "
                @media (min-width: {$columns_min_width}px){
                    {$block_classname}{
                        left: 50%;
                        margin-left: -{$columns_margin_left}px;
                    }
                }
                ";
            }

            $styles .= "
            @media (min-width: {$columns_min_width}px){
                {$block_classname}{
                    max-width: {$width}px;
                }
            }
            ";
        }
        
        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }

    
        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_group_overflow' => $overflow,

                '--agni_block_group_hidden_desktop' => (isset($hidden['desktop']) && $hidden['desktop']) ? 'none' : '',
                '--agni_block_group_hidden_laptop' => (isset($hidden['laptop']) && $hidden['laptop']) ? 'none' : '',
                '--agni_block_group_hidden_tab' => (isset($hidden['tab']) && $hidden['tab']) ? 'none' : '',
                '--agni_block_group_hidden_mobile' => (isset($hidden['mobile']) && $hidden['mobile']) ? 'none' : '',

                '--agni_block_group_order_desktop' => isset($order['desktop']) ? $order['desktop'] : '',
                '--agni_block_group_order_laptop' => isset($order['laptop']) ? $order['laptop'] : '',
                '--agni_block_group_order_tab' => isset($order['tab']) ? $order['tab'] : '',
                '--agni_block_group_order_mobile' => isset($order['mobile']) ? $order['mobile'] : '',

                '--agni_block_group_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_group_background_color' => $background_color,
                '--agni_block_group_background_gradient' => $background_gradient,
                '--agni_block_group_border_color' => $border_color,
                '--agni_block_group_background_url' => 'url(' . $background_url . ')',
                '--agni_block_group_background_size' => $background_size,
                '--agni_block_group_background_position' => $background_position,
                '--agni_block_group_background_repeat' => $background_repeat,
                '--agni_block_group_radius' => $border_radius,
            ));
        $styles .= "}";

            
        $styles .= "{$block_classname}.has-animation {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--cartify_animation_delay' => $animation_delay,
                '--cartify_animation_duration' => $animation_duration
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_slider' ) ){
    function agni_builder_gutenberg_blocks_css_slider( $block_settings, $block_classname ){
        $styles = '';

        $slider_id = isset($block_settings['id']) ? $block_settings['id'] : '';

        if( empty( $slider_id ) ){
            // $slider_id = 0;
            $sliders = (array)get_option('agni_slider_builder_sliders');
            if( !empty( $sliders ) ){
                $slider_id = $sliders[0]['id'];
            }
            else{
                $slider_id = 0;
            }
        }

        wp_enqueue_style( 'cartify-slider-custom-' . $slider_id );
        wp_enqueue_style( 'cartify-animista' );
        
        return $styles;
    }
}


function agni_builder_gutenberg_blocks_css_heading( $block_settings, $block_classname ){
    $styles = '';

    $text_align = isset( $block_settings['align'] ) ? $block_settings['align'] : '';

    $font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
    $color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';
    $letter_spacing = isset( $block_settings['headingCssLetterSpacing'] ) ? $block_settings['headingCssLetterSpacing'] : '';
    $line_height = isset( $block_settings['headingCssLineHeight'] ) ? $block_settings['headingCssLineHeight'] : '';
    $text_transform = isset( $block_settings['headingCssTextTransform'] ) ? $block_settings['headingCssTextTransform'] : '';

    $background_image = isset( $block_settings['backgroundImage'] ) ? $block_settings['backgroundImage'] : '';
    $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
    $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
    $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
    $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '';
    $inner_padding_horizontal = isset( $block_settings['innerPaddingHorizontal'] ) ? $block_settings['innerPaddingHorizontal'] : '';
    $inner_padding_vertical = isset( $block_settings['innerPaddingVertical'] ) ? $block_settings['innerPaddingVertical'] : '';
    
    $styles .= "{$block_classname} {";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_heading_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
            '--agni_block_heading_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
            '--agni_block_heading_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
            '--agni_block_heading_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

            '--agni_block_heading_inner_padding_horizontal_desktop' => isset($inner_padding_horizontal['desktop']) ? $inner_padding_horizontal['desktop'] : '',
            '--agni_block_heading_inner_padding_horizontal_laptop' => isset($inner_padding_horizontal['laptop']) ? $inner_padding_horizontal['laptop'] : '',
            '--agni_block_heading_inner_padding_horizontal_tab' => isset($inner_padding_horizontal['tab']) ? $inner_padding_horizontal['tab'] : '',
            '--agni_block_heading_inner_padding_horizontal_mobile' => isset($inner_padding_horizontal['mobile']) ? $inner_padding_horizontal['mobile'] : '',

            '--agni_block_heading_inner_padding_vertical_desktop' => isset($inner_padding_vertical['desktop']) ? $inner_padding_vertical['desktop'] : '',
            '--agni_block_heading_inner_padding_vertical_laptop' => isset($inner_padding_vertical['laptop']) ? $inner_padding_vertical['laptop'] : '',
            '--agni_block_heading_inner_padding_vertical_tab' => isset($inner_padding_vertical['tab']) ? $inner_padding_vertical['tab'] : '',
            '--agni_block_heading_inner_padding_vertical_mobile' => isset($inner_padding_vertical['mobile']) ? $inner_padding_vertical['mobile'] : '',

            '--agni_block_heading_color' => $color,
            '--agni_block_heading_text_transform' => $text_transform,
            '--agni_block_heading_line_height' => $line_height,
            '--agni_block_heading_letter_spacing' => $letter_spacing,
            '--agni_block_heading_text_align' => $text_align,

            '--agni_block_heading_background_image' => $background_image,
            '--agni_block_heading_background_color' => $background_color,
            '--agni_block_heading_border_width' => $border_width,
            '--agni_block_heading_border_color' => $border_color,
            '--agni_block_heading_border_radius' => $border_radius
        ));
    $styles .= "}";

    return $styles;
}


function agni_builder_gutenberg_blocks_css_paragraph( $block_settings, $block_classname ){
    $styles = '';

    $text_align = isset( $block_settings['align'] ) ? $block_settings['align'] : '';

    $font_size = isset( $block_settings['paragraphCssFontSize'] ) ? $block_settings['paragraphCssFontSize'] : '';
    $color = isset( $block_settings['paragraphCssColor'] ) ? $block_settings['paragraphCssColor'] : '';
    $letter_spacing = isset( $block_settings['paragraphCssLetterSpacing'] ) ? $block_settings['paragraphCssLetterSpacing'] : '';
    $line_height = isset( $block_settings['paragraphCssLineHeight'] ) ? $block_settings['paragraphCssLineHeight'] : '';
    $text_transform = isset( $block_settings['paragraphCssTextTransform'] ) ? $block_settings['paragraphCssTextTransform'] : '';

    $styles .= "{$block_classname} {";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_paragraph_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
            '--agni_block_paragraph_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
            '--agni_block_paragraph_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
            '--agni_block_paragraph_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

            '--agni_block_paragraph_color' => $color,
            '--agni_block_paragraph_text_transform' => $text_transform,
            '--agni_block_paragraph_line_height' => $line_height,
            '--agni_block_paragraph_letter_spacing' => $letter_spacing,
            '--agni_block_paragraph_text_align' => $text_align
        ));
    $styles .= "}";
    
    return $styles;
}

function agni_builder_gutenberg_blocks_css_divider( $block_settings, $block_classname ){
    $styles = '';

    $width = isset( $block_settings['width'] ) ? $block_settings['width'] : '';
    $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
    $size = isset( $block_settings['size'] ) ? $block_settings['size'] : '';
    $color = isset( $block_settings['color'] ) ? $block_settings['color'] : '';
    $display_style = isset( $block_settings['displayStyle'] ) ? $block_settings['displayStyle'] : '1';


    $styles .= "{$block_classname} {";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_divider_color' => $color,
            '--agni_block_divider_size' => $size,
            '--agni_block_divider_width' => $width,
            '--agni_block_divider_height' => $height
        ));
    $styles .= "}";

    return $styles;
}

function agni_builder_gutenberg_blocks_css_separator( $block_settings, $block_classname ){
    $styles = '';

    $width = isset( $block_settings['width'] ) ? $block_settings['width'] : '';
    $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
    $color = isset( $block_settings['color'] ) ? $block_settings['color'] : '';
    $display_style = isset( $block_settings['displayStyle'] ) ? $block_settings['displayStyle'] : '5';

    $devices = array( 1440, 1200, 1024, 667 );

    if( !empty( $width ) ){
        if( !($width === 'wide' || $width === 'full' || $width === 'container') ){
            $columns_min_width = intval($width) + 40;
            $columns_margin_left = intval($width) / 2;

            foreach ($devices as $value) {
                if( intval($width) < $value ){
                    $columns_min_width = $value;
                }
            }

            $styles .= "
            @media (min-width: {$columns_min_width}px){
                {$block_classname}{
                    left: 50%;
                    max-width: {$width}px;
                    margin-left: -{$columns_margin_left}px;
                }
            }
            ";
        }
    }
    
    $styles .= "{$block_classname} {";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_separator_height' => $height,
            '--agni_block_separator_color' => $color,
        ));
    $styles .= "}";
    

    return $styles;
}

function agni_builder_gutenberg_blocks_css_spacer( $block_settings, $block_classname ){
    $styles = '';

    $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
    
    $styles .= "{$block_classname} {";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_spacer_height_desktop' => isset($height['desktop']) ? $height['desktop'] : '',
            '--agni_block_spacer_height_laptop' => isset($height['laptop']) ? $height['laptop'] : '',
            '--agni_block_spacer_height_tab' => isset($height['tab']) ? $height['tab'] : '',
            '--agni_block_spacer_height_mobile' => isset($height['mobile']) ? $height['mobile'] : '',
        ));
    $styles .= "}";


    return $styles;
}

function agni_builder_gutenberg_blocks_css_list( $block_settings, $block_classname ){
    $styles = '';

    
    $font_size = isset($block_settings['cssFontSize']) ? $block_settings['cssFontSize'] : '';
    $gap = isset($block_settings['gap']) ? $block_settings['gap'] : '';

    $styles .= "{$block_classname}{";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_list_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
            '--agni_block_list_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
            '--agni_block_list_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
            '--agni_block_list_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

            '--agni_block_list_gap' => $gap,
        ));
    $styles .= "}";

    return $styles;
}

function agni_builder_gutenberg_blocks_css_map( $block_settings, $block_classname ){
    $styles = '';

    
    $height = isset($block_settings['cssHeight']) ? $block_settings['cssHeight'] : '';

    $styles .= "{$block_classname}{";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_map_height_desktop' => isset($height['desktop']) ? $height['desktop'] : '',
            '--agni_block_map_height_laptop' => isset($height['laptop']) ? $height['laptop'] : '',
            '--agni_block_map_height_tab' => isset($height['tab']) ? $height['tab'] : '',
            '--agni_block_map_height_mobile' => isset($height['mobile']) ? $height['mobile'] : '',

        ));
    $styles .= "}";

    return $styles;
}

function agni_builder_gutenberg_blocks_css_buttons( $block_settings, $block_classname ){
    $styles = '';
    
    $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';

    $styles .= "{$block_classname}{";
        $styles .= agni_builder_prepare_css_styles(array(
            '--agni_block_buttons_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
            '--agni_block_buttons_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
            '--agni_block_buttons_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
            '--agni_block_buttons_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',
        ));
    $styles .= "}";
    
    return $styles;
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_button' ) ){
    function agni_builder_gutenberg_blocks_css_button( $block_settings, $block_classname ){

        $styles = '';

        $width = isset( $block_settings['width'] ) ? $block_settings['width'] : '';
        $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
        $font_size = isset( $block_settings['fontSize'] ) ? $block_settings['fontSize'] : '';
        $text_transform = isset( $block_settings['textTransform'] ) ? $block_settings['textTransform'] : '';$border_radius = isset( $block_settings['linkCssBorderRadius'] ) ? $block_settings['linkCssBorderRadius'] : '';
        
        $color = isset( $block_settings['linkCssColor'] ) ? $block_settings['linkCssColor'] : '';
        $border_color = isset( $block_settings['linkCssBorderColor'] ) ? $block_settings['linkCssBorderColor'] : '';
        $background_color = isset( $block_settings['linkCssBackgroundColor'] ) ? $block_settings['linkCssBackgroundColor'] : '';

        $hover_color = isset( $block_settings['linkHoverCssColor'] ) ? $block_settings['linkHoverCssColor'] : '';
        $hover_border_color = isset( $block_settings['linkHoverCssBorderColor'] ) ? $block_settings['linkHoverCssBorderColor'] : '';
        $hover_background_color = isset( $block_settings['linkHoverCssBackgroundColor'] ) ? $block_settings['linkHoverCssBackgroundColor'] : '';

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_button_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
                '--agni_block_button_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
                '--agni_block_button_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
                '--agni_block_button_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

                '--agni_block_button_width_desktop' => isset($width['desktop']) ? $width['desktop'] : '',
                '--agni_block_button_width_laptop' => isset($width['laptop']) ? $width['laptop'] : '',
                '--agni_block_button_width_tab' => isset($width['tab']) ? $width['tab'] : '',
                '--agni_block_button_width_mobile' => isset($width['mobile']) ? $width['mobile'] : '',

                '--agni_block_button_height_desktop' => isset($height['desktop']) ? $height['desktop'] : '',
                '--agni_block_button_height_laptop' => isset($height['laptop']) ? $height['laptop'] : '',
                '--agni_block_button_height_tab' => isset($height['tab']) ? $height['tab'] : '',
                '--agni_block_button_height_mobile' => isset($height['mobile']) ? $height['mobile'] : '',

                '--agni_block_button_color' => $color,
                '--agni_block_button_border_color' => $border_color,
                '--agni_block_button_background_color' => $background_color,
                '--agni_block_button_hover_color' => $hover_color,
                '--agni_block_button_hover_border_color' => $hover_border_color,
                '--agni_block_button_hover_background_color' => $hover_background_color,
                '--agni_block_button_border_radius' => $border_radius,
                
                'text-transform' => $text_transform,
            ));
        $styles .= "}";

        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_icons' ) ){
    function agni_builder_gutenberg_blocks_css_icons( $block_settings, $block_classname ){
        $styles = '';
        
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_icons_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_icons_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_icons_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_icons_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',
            ));
        $styles .= "}";
        
        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_icon' ) ){
    function agni_builder_gutenberg_blocks_css_icon( $block_settings, $block_classname ){

        $styles = '';

        $color = isset( $block_settings['linkCssColor'] ) ? $block_settings['linkCssColor'] : '';
        $background_color = isset( $block_settings['linkCssBackgroundColor'] ) ? $block_settings['linkCssBackgroundColor'] : '';
        $border_color = isset( $block_settings['linkCssBorderColor'] ) ? $block_settings['linkCssBorderColor'] : '';
        $hover_color = isset( $block_settings['linkHoverCssColor'] ) ? $block_settings['linkHoverCssColor'] : '';
        $hover_background_color = isset( $block_settings['linkHoverCssBackgroundColor'] ) ? $block_settings['linkHoverCssBackgroundColor'] : '';
        $hover_border_color = isset( $block_settings['linkHoverCssBorderColor'] ) ? $block_settings['linkHoverCssBorderColor'] : '';

        $icon_size = isset( $block_settings['size'] ) ? $block_settings['size'] : '';
        $icon_container_size = isset( $block_settings['containerSize'] ) ? $block_settings['containerSize'] : '';
        $icon_container_radius = isset( $block_settings['containerBorderRadius'] ) ? $block_settings['containerBorderRadius'] : '';


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_icon_size' => $icon_size,
                '--agni_block_icon_container_size' => $icon_container_size,
                '--agni_block_icon_container_radius' => $icon_container_radius,

                '--agni_block_icon_color' => $color,
                '--agni_block_icon_border_color' => $border_color,
                '--agni_block_icon_background_color' => $background_color,
                '--agni_block_icon_hover_color' => $hover_color,
                '--agni_block_icon_hover_border_color' => $hover_border_color,
                '--agni_block_icon_hover_background_color' => $hover_background_color
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_banners' ) ){
    function agni_builder_gutenberg_blocks_css_banners( $block_settings, $block_classname ){
        $styles = "";

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';


        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_banners_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_banners_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_banners_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_banners_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_banners_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_banners_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_banners_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_banners_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_banner' ) ){
    function agni_builder_gutenberg_blocks_css_banner( $block_settings, $block_classname ){
        $styles = "";

        $height = isset( $block_settings['cssHeight'] ) ? $block_settings['cssHeight'] : '';

        $content_width = isset( $block_settings['contentCssWidth'] ) ? $block_settings['contentCssWidth'] : '';
        $overflow = isset( $block_settings['overflow'] ) ? $block_settings['overflow'] : '';

        // $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['url'] ) ? $block_settings['url'] : '';
        $background_position = isset( $block_settings['backgroundPosition'] ) ? $block_settings['backgroundPosition'] : '';
        $background_repeat = isset( $block_settings['backgroundRepeat'] ) ? $block_settings['backgroundRepeat'] : '';
        $background_size = isset( $block_settings['backgroundSize'] ) ? $block_settings['backgroundSize'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '';
        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';


        if( !empty( $width_ratio ) ){
            $ratio_array = explode( 'x', $width_ratio );
            $styles .= "
            {$block_classname} {
                --agni_block_banner_ratio:{$ratio_array[0]};
            }
            ";

        }

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_banner_overflow' => $overflow,

                '--agni_block_banner_height_desktop' => isset($height['desktop']) ? $height['desktop'] : '',
                '--agni_block_banner_height_laptop' => isset($height['laptop']) ? $height['laptop'] : '',
                '--agni_block_banner_height_tab' => isset($height['tab']) ? $height['tab'] : '',
                '--agni_block_banner_height_mobile' => isset($height['mobile']) ? $height['mobile'] : '',

                '--agni_block_banner_content_width_desktop' => isset($content_width['desktop']) ? $content_width['desktop'] : '',
                '--agni_block_banner_content_width_laptop' => isset($content_width['laptop']) ? $content_width['laptop'] : '',
                '--agni_block_banner_content_width_tab' => isset($content_width['tab']) ? $content_width['tab'] : '',
                '--agni_block_banner_content_width_mobile' => isset($content_width['mobile']) ? $content_width['mobile'] : '',


                '--agni_block_banner_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_banner_background_color' => $background_color,
                '--agni_block_banner_background_gradient' => $background_gradient,
                '--agni_block_banner_border_color' => $border_color,
                '--agni_block_banner_background_url' => 'url(' . $background_url . ')',
                '--agni_block_banner_background_size' => $background_size,
                '--agni_block_banner_background_position' => $background_position,
                '--agni_block_banner_background_repeat' => $background_repeat,
                '--agni_block_banner_radius' => $border_radius,
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_images' ) ){
    function agni_builder_gutenberg_blocks_css_images( $block_settings, $block_classname ){
        $styles = "";

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        $radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '';
        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';


        if( !empty( $width_ratio ) ){
            // print_r( $width_ratio );

            $width_ratio_array = array();

            foreach ($width_ratio as $key => $ratio) {

                $ratio_array = explode('x', $ratio['value']);


                if( $ratio_array[0] != '1' ){
                    $ratio_index = $ratio['index'] + 1;
                    $styles .= "
                    {$block_classname} .agni-block-gallery-item:nth-child({$ratio_index}){
                        --agni_block_gallery_item_width_ratio: {$ratio_array[0]};
                    }
                    ";
                }
            }
        }

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_gallery_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_gallery_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_gallery_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_gallery_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_gallery_height_desktop' => isset($height['desktop']) ? $height['desktop'] : '',
                '--agni_block_gallery_height_laptop' => isset($height['laptop']) ? $height['laptop'] : '',
                '--agni_block_gallery_height_tab' => isset($height['tab']) ? $height['tab'] : '',
                '--agni_block_gallery_height_mobile' => isset($height['mobile']) ? $height['mobile'] : '',

                '--agni_block_gallery_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_gallery_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_gallery_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_gallery_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_gallery_radius' => $radius,

                '--agni_block_gallery_background_color' => $background_color,
                '--agni_block_gallery_border_color' => $border_color,
                '--agni_block_gallery_border_width' => $border_width,
            ));
        $styles .= "}";
        

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_image' ) ){
    function agni_builder_gutenberg_blocks_css_image( $block_settings, $block_classname ){
        $styles = "";

        $image_absolute_position = isset( $block_settings['absolutePosition'] ) ? $block_settings['absolutePosition'] : '';
        $image_absolute_top_offset = isset( $block_settings['absoluteOffsetTop'] ) ? $block_settings['absoluteOffsetTop'] : '';
        $image_absolute_left_offset = isset( $block_settings['absoluteOffsetLeft'] ) ? $block_settings['absoluteOffsetLeft'] : '';
        $image_border_radius = isset( $block_settings['imgCssBorderRadius'] ) ? $block_settings['imgCssBorderRadius'] : '';
        $width = isset( $block_settings['width'] ) ? $block_settings['width'] : '';
        $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $border_color = isset( $block_settings['borderColor'] ) ? $block_settings['borderColor'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';

       
        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_image_position_desktop' => (isset($image_absolute_position['desktop']) && $image_absolute_position['desktop']) ? 'absolute' : '',
                '--agni_block_image_position_laptop' => (isset($image_absolute_position['laptop']) && $image_absolute_position['laptop']) ? 'absolute' : '',
                '--agni_block_image_position_tab' => (isset($image_absolute_position['tab']) && $image_absolute_position['tab']) ? 'absolute' : '',
                '--agni_block_image_position_mobile' => (isset($image_absolute_position['mobile']) && $image_absolute_position['mobile']) ? 'absolute' : '',

                '--agni_block_image_offset_top_desktop' => isset($image_absolute_top_offset['desktop']) ? $image_absolute_top_offset['desktop'] : '',
                '--agni_block_image_offset_top_laptop' => isset($image_absolute_top_offset['laptop']) ? $image_absolute_top_offset['laptop'] : '',
                '--agni_block_image_offset_top_tab' => isset($image_absolute_top_offset['tab']) ? $image_absolute_top_offset['tab'] : '',
                '--agni_block_image_offset_top_mobile' => isset($image_absolute_top_offset['mobile']) ? $image_absolute_top_offset['mobile'] : '',

                '--agni_block_image_offset_left_desktop' => isset($image_absolute_left_offset['desktop']) ? $image_absolute_left_offset['desktop'] : '',
                '--agni_block_image_offset_left_laptop' => isset($image_absolute_left_offset['laptop']) ? $image_absolute_left_offset['laptop'] : '',
                '--agni_block_image_offset_left_tab' => isset($image_absolute_left_offset['tab']) ? $image_absolute_left_offset['tab'] : '',
                '--agni_block_image_offset_left_mobile' => isset($image_absolute_left_offset['mobile']) ? $image_absolute_left_offset['mobile'] : '',

                '--agni_block_image_max_width' => !empty( $width ) ? $width . 'px' : '',
                '--agni_block_image_max_height' => !empty( $height ) ? $height . 'px' : '',


                '--agni_block_image_background_color' => $background_color,
                '--agni_block_image_border_color' => $border_color,
                '--agni_block_image_border_width' => $border_width,
                '--agni_block_image_border_radius' => $image_border_radius,
            ));
        $styles .= "}";

        // $styles .= "{$block_classname} img{";
        //     $styles .= agni_builder_prepare_css_styles( array(
        //         'border-radius' => $image_border_radius
        //     ));
        // $styles .= "}";
        

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_video' ) ){
    function agni_builder_gutenberg_blocks_css_video( $block_settings, $block_classname ){
        $styles = "";

        $height = isset( $block_settings['height'] ) ? $block_settings['height'] : '';
        $poster_overlay_color = isset( $block_settings['posterOverlayColor'] ) ? $block_settings['posterOverlayColor'] : '';
        $poster_overlay_gradient = isset( $block_settings['posterOverlayGradient'] ) ? $block_settings['posterOverlayGradient'] : '';
        $poster_overlay_opacity = isset( $block_settings['posterOverlayOpacity'] ) ? $block_settings['posterOverlayOpacity'] : '';


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_video_overlay_color' => $poster_overlay_color,
                '--agni_block_video_overlay_gradient' => $poster_overlay_gradient,
                '--agni_block_video_overlay_opacity' => $poster_overlay_opacity,
                '--agni_block_video_height' => $height,
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_cards' ) ){
    function agni_builder_gutenberg_blocks_css_cards( $block_settings, $block_classname ){
        $styles = "";

        // print_r( $block_settings );

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        $separator = isset( $block_settings['separator'] ) ? $block_settings['separator'] : '';
        $separator_color = isset( $block_settings['separatorColor'] ) ? $block_settings['separatorColor'] : ''; 
        $separator_height = isset( $block_settings['separatorHeight'] ) ? $block_settings['separatorHeight'] : '';
    
        
        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_cards_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_cards_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_cards_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_cards_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_cards_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_cards_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_cards_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_cards_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_cards_sep_height' => $separator_height,
                '--agni_block_cards_sep_color' => $separator_color,
            ));
        $styles .= "}";


        if( isset($columns['desktop']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['desktop']}n):before{";
                $styles .= "
                --agni_block_cards_sep_display_desktop: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['laptop']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['laptop']}n):before{";
                $styles .= "
                --agni_block_cards_sep_display_laptop: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['tab']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['tab']}n):before{";
                $styles .= "
                --agni_block_cards_sep_display_tab: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['mobile']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['mobile']}n):before{";
                $styles .= "
                --agni_block_cards_sep_display_mobile: none;
                ";
            $styles .= "}";
        }

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_card' ) ){
    function agni_builder_gutenberg_blocks_css_card( $block_settings, $block_classname ){
        $styles = "";

        // print_r( $block_settings );

        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';
        $image_border_radius = isset( $block_settings['mediaCssBorderRadius'] ) ? $block_settings['mediaCssBorderRadius'] : '';
        $image_border_color = isset( $block_settings['mediaCssBorderColor'] ) ? $block_settings['mediaCssBorderColor'] : '';
        $content_width = isset( $block_settings['contentCssWidth'] ) ? $block_settings['contentCssWidth'] : '';
        $content_background_color = isset( $block_settings['contentBgColor'] ) ? $block_settings['contentBgColor'] : '';
        $content_padding = isset( $block_settings['contentPadding'] ) ? $block_settings['contentPadding'] : '';
        $content_offset = isset( $block_settings['contentOffset'] ) ?  $block_settings['contentOffset'] : '';
        $content_offset_left = isset( $block_settings['contentOffsetLeft'] ) ?  $block_settings['contentOffsetLeft'] : '';

        $background_color = isset( $block_settings['cssBackgroundColor'] ) ? $block_settings['cssBackgroundColor'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';

        $media_gap = isset( $block_settings['mediaGap'] ) ? $block_settings['mediaGap'] : '';



        if( !empty( $width_ratio ) ){
            $ratio_array = explode( 'x', $width_ratio );

            $styles .= "
            {$block_classname} {
                --agni_block_card_ratio:{$ratio_array[0]};
            }
            ";

        }

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_card_media_gap_desktop' => isset($media_gap['desktop']) ? $media_gap['desktop'] : '',
                '--agni_block_card_media_gap_laptop' => isset($media_gap['laptop']) ? $media_gap['laptop'] : '',
                '--agni_block_card_media_gap_tab' => isset($media_gap['tab']) ? $media_gap['tab'] : '',
                '--agni_block_card_media_gap_mobile' => isset($media_gap['mobile']) ? $media_gap['mobile'] : '',
                
                '--agni_block_card_media_radius' => $image_border_radius,
                '--agni_block_card_media_border_color' => $image_border_color,

                '--agni_block_card_background_color' => $background_color,
                '--agni_block_card_border_color' => $border_color,
                '--agni_block_card_radius' => $border_radius,

                '--agni_block_card_content_width_desktop' => isset($content_width['desktop']) ? $content_width['desktop'] : '',
                '--agni_block_card_content_width_laptop' => isset($content_width['laptop']) ? $content_width['laptop'] : '',
                '--agni_block_card_content_width_tab' => isset($content_width['tab']) ? $content_width['tab'] : '',
                '--agni_block_card_content_width_mobile' => isset($content_width['mobile']) ? $content_width['mobile'] : '',

                '--agni_block_card_content_background_color' =>  $content_background_color,


                '--agni_block_card_content_padding_desktop' => isset($content_padding['desktop']) ? $content_padding['desktop'] : '',
                '--agni_block_card_content_padding_laptop' => isset($content_padding['laptop']) ? $content_padding['laptop'] : '',
                '--agni_block_card_content_padding_tab' => isset($content_padding['tab']) ? $content_padding['tab'] : '',
                '--agni_block_card_content_padding_mobile' => isset($content_padding['mobile']) ? $content_padding['mobile'] : '',

                '--agni_block_card_content_offset_desktop' => isset($content_offset['desktop']) ? $content_offset['desktop'] : '',
                '--agni_block_card_content_offset_laptop' => isset($content_offset['laptop']) ? $content_offset['laptop'] : '',
                '--agni_block_card_content_offset_tab' => isset($content_offset['tab']) ? $content_offset['tab'] : '',
                '--agni_block_card_content_offset_mobile' => isset($content_offset['mobile']) ? $content_offset['mobile'] : '',

                '--agni_block_card_content_offset_left_desktop' => isset($content_offset_left['desktop']) ? $content_offset_left['desktop'] : '',
                '--agni_block_card_content_offset_left_laptop' => isset($content_offset_left['laptop']) ? $content_offset_left['laptop'] : '',
                '--agni_block_card_content_offset_left_tab' => isset($content_offset_left['tab']) ? $content_offset_left['tab'] : '',
                '--agni_block_card_content_offset_left_mobile' => isset($content_offset_left['mobile']) ? $content_offset_left['mobile'] : '',
                

            ));
        $styles .= "}";

        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_icon_cards' ) ){
    function agni_builder_gutenberg_blocks_css_icon_cards( $block_settings, $block_classname ){
        $styles = "";

        // print_r( $block_settings );

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        $separator = isset( $block_settings['separator'] ) ? $block_settings['separator'] : '';
        $separator_color = isset( $block_settings['separatorColor'] ) ? $block_settings['separatorColor'] : ''; 
        $separator_height = isset( $block_settings['separatorHeight'] ) ? $block_settings['separatorHeight'] : '';
    

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_icon_cards_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_icon_cards_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_icon_cards_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_icon_cards_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_icon_cards_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_icon_cards_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_icon_cards_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_icon_cards_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_icon_cards_sep_height' => $separator_height,
                '--agni_block_icon_cards_sep_color' => $separator_color,
            ));
        $styles .= "}";


        if( isset($columns['desktop']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['desktop']}n):before{";
                $styles .= "
                --agni_block_icon_cards_sep_display_desktop: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['laptop']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['laptop']}n):before{";
                $styles .= "
                --agni_block_icon_cards_sep_display_laptop: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['tab']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['tab']}n):before{";
                $styles .= "
                --agni_block_icon_cards_sep_display_tab: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['mobile']) ){
            $styles .= "{$block_classname} >div:nth-child({$columns['mobile']}n):before{";
                $styles .= "
                --agni_block_icon_cards_sep_display_mobile: none;
                ";
            $styles .= "}";
        }

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_icon_card' ) ){
    function agni_builder_gutenberg_blocks_css_icon_card( $block_settings, $block_classname ){
        $styles = "";

        $icon_color = isset( $block_settings['iconCssColor'] ) ? $block_settings['iconCssColor'] : '';
        $icon_background_color = isset( $block_settings['iconCssBackgroundColor'] ) ? $block_settings['iconCssBackgroundColor'] : '';
        $icon_border_color = isset( $block_settings['iconCssBorderColor'] ) ? $block_settings['iconCssBorderColor'] : '';
        $icon_hover_color = isset( $block_settings['iconHoverCssColor'] ) ? $block_settings['iconHoverCssColor'] : '';
        $icon_hover_background_color = isset( $block_settings['iconHoverCssBackgroundColor'] ) ? $block_settings['iconHoverCssBackgroundColor'] : '';
        $icon_hover_border_color = isset( $block_settings['iconHoverCssBorderColor'] ) ? $block_settings['iconHoverCssBorderColor'] : '';
       
        $icon_size = isset( $block_settings['iconSize'] ) ? $block_settings['iconSize'] : '';
        $icon_container_size = isset( $block_settings['iconContainerSize'] ) ? $block_settings['iconContainerSize'] : '';
        $icon_container_radius = isset( $block_settings['iconContainerBorderRadius'] ) ? $block_settings['iconContainerBorderRadius'] : '';

        $icon_card_padding = isset( $block_settings['cardCssPadding'] ) ? $block_settings['cardCssPadding'] : '';
        $icon_gap = isset( $block_settings['iconGap'] ) ? $block_settings['iconGap'] : '';
        $background_color = isset( $block_settings['cssBackgroundColor'] ) ? $block_settings['cssBackgroundColor'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';


        if( !empty( $icon_card_padding ) ){
            $styles .= "{$block_classname} {";
            foreach ($icon_card_padding as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "padding-" . $key . ": " . $value . "; ";
                }
            }
            $styles .= "}";
        }

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_icon_card_icon_gap_desktop' => isset($icon_gap['desktop']) ? $icon_gap['desktop'] : '',
                '--agni_block_icon_card_icon_gap_laptop' => isset($icon_gap['laptop']) ? $icon_gap['laptop'] : '',
                '--agni_block_icon_card_icon_gap_tab' => isset($icon_gap['tab']) ? $icon_gap['tab'] : '',
                '--agni_block_icon_card_icon_gap_mobile' => isset($icon_gap['mobile']) ? $icon_gap['mobile'] : '',

                '--agni_block_icon_card_icon_size' => $icon_size,
                '--agni_block_icon_card_icon_container_size' => $icon_container_size,
                '--agni_block_icon_card_icon_container_radius' => $icon_container_radius,

                '--agni_block_icon_card_icon_color' => $icon_color,
                '--agni_block_icon_card_icon_border_color' => $icon_border_color,
                '--agni_block_icon_card_icon_background_color' => $icon_background_color,
                '--agni_block_icon_card_icon_hover_color' => $icon_hover_color,
                '--agni_block_icon_card_icon_hover_border_color' => $icon_hover_border_color,
                '--agni_block_icon_card_icon_hover_background_color' => $icon_hover_background_color,

                '--agni_block_icon_card_background_color' => $background_color,
                '--agni_block_icon_card_border_color' => $border_color,
                '--agni_block_icon_card_border_radius' => $border_radius,
            ));
        $styles .= "}";
      
        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_text_cards' ) ){
    function agni_builder_gutenberg_blocks_css_text_cards( $block_settings, $block_classname ){
        $styles = "";

        // print_r( $block_settings );

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        $separator = isset( $block_settings['separator'] ) ? $block_settings['separator'] : '';
        $separator_color = isset( $block_settings['separatorColor'] ) ? $block_settings['separatorColor'] : ''; 
        $separator_height = isset( $block_settings['separatorHeight'] ) ? $block_settings['separatorHeight'] : '';

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_text_cards_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_text_cards_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_text_cards_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_text_cards_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_text_cards_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_text_cards_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_text_cards_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_text_cards_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_text_cards_sep_height' => $separator_height,
                '--agni_block_text_cards_sep_color' => $separator_color,
            ));
        $styles .= "}";

        if( isset($columns['desktop']) && $columns['desktop'] != '3'){
            $styles .= "{$block_classname}.has-separator >div:nth-child(3n):before{
                --agni_block_text_cards_sep_display_desktop: block;
            }";
            $styles .= "{$block_classname} >div:nth-child({$columns['desktop']}n):before{";
                $styles .= "
                --agni_block_text_cards_sep_display_desktop: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['laptop']) && $columns['laptop'] != '3' ){
            $styles .= "{$block_classname}.has-separator >div:nth-child(3n):before{
                --agni_block_text_cards_sep_display_laptop: block;
            }";
            $styles .= "{$block_classname} >div:nth-child({$columns['laptop']}n):before{";
                $styles .= "
                --agni_block_text_cards_sep_display_laptop: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['tab']) && $columns['tab'] != '3' ){
            $styles .= "{$block_classname}.has-separator >div:nth-child(3n):before{
                --agni_block_text_cards_sep_display_tab: block;
            }";
            $styles .= "{$block_classname} >div:nth-child({$columns['tab']}n):before{";
                $styles .= "
                --agni_block_text_cards_sep_display_tab: none;
                ";
            $styles .= "}";
        }

        if( isset($columns['mobile']) && $columns['mobile'] != '1' ){
            $styles .= "{$block_classname}.has-separator >div:nth-child(1n):before{
                --agni_block_text_cards_sep_display_mobile: block;
            }";
            $styles .= "{$block_classname} >div:nth-child({$columns['mobile']}n):before{";
                $styles .= "
                --agni_block_text_cards_sep_display_mobile: none;
                ";
            $styles .= "}";
        }

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_text_card' ) ){
    function agni_builder_gutenberg_blocks_css_text_card( $block_settings, $block_classname ){
        $styles = "";

        $text_color = isset( $block_settings['textCssColor'] ) ? $block_settings['textCssColor'] : '';
        $text_background_color = isset( $block_settings['textCssBackgroundColor'] ) ? $block_settings['textCssBackgroundColor'] : '';
        $text_border_color = isset( $block_settings['textCssBorderColor'] ) ? $block_settings['textCssBorderColor'] : '';
        $text_hover_color = isset( $block_settings['textHoverCssColor'] ) ? $block_settings['textHoverCssColor'] : '';
        $text_hover_background_color = isset( $block_settings['textHoverCssBackgroundColor'] ) ? $block_settings['textHoverCssBackgroundColor'] : '';
        $text_hover_border_color = isset( $block_settings['textHoverCssBorderColor'] ) ? $block_settings['textHoverCssBorderColor'] : '';
       
        $text_size = isset( $block_settings['textSize'] ) ? $block_settings['textSize'] : '';
        $text_container_size = isset( $block_settings['textContainerSize'] ) ? $block_settings['textContainerSize'] : '';
        $text_container_radius = isset( $block_settings['textContainerBorderRadius'] ) ? $block_settings['textContainerBorderRadius'] : '';

        $text_card_padding = isset( $block_settings['cardCssPadding'] ) ? $block_settings['cardCssPadding'] : '';
        $gap = isset( $block_settings['iconGap'] ) ? $block_settings['iconGap'] : '';
        $background_color = isset( $block_settings['cssBackgroundColor'] ) ? $block_settings['cssBackgroundColor'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';


        if( !empty( $text_card_padding ) ){
            $styles .= "{$block_classname} {";
            foreach ($text_card_padding as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "padding-" . $key . ": " . $value . "; ";
                }
            }
            $styles .= "}";
        }

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_text_card_text_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_text_card_text_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_text_card_text_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_text_card_text_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_text_card_text_size_desktop' => isset($text_size['desktop']) ? $text_size['desktop'] : '',
                '--agni_block_text_card_text_size_laptop' => isset($text_size['laptop']) ? $text_size['laptop'] : '',
                '--agni_block_text_card_text_size_tab' => isset($text_size['tab']) ? $text_size['tab'] : '',
                '--agni_block_text_card_text_size_mobile' => isset($text_size['mobile']) ? $text_size['mobile'] : '',

                '--agni_block_text_card_text_container_size' => $text_container_size,
                '--agni_block_text_card_text_container_radius' => $text_container_radius,

                '--agni_block_text_card_text_color' => $text_color,
                '--agni_block_text_card_text_border_color' => $text_border_color,
                '--agni_block_text_card_text_background_color' => $text_background_color,
                '--agni_block_text_card_text_hover_color' => $text_hover_color,
                '--agni_block_text_card_text_hover_border_color' => $text_hover_border_color,
                '--agni_block_text_card_text_hover_background_color' => $text_hover_background_color,

                '--agni_block_text_card_background_color' => $background_color,
                '--agni_block_text_card_border_color' => $border_color,
                '--agni_block_text_card_border_radius' => $border_radius,
            ));
        $styles .= "}";
      
        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_hotspot' ) ){
    function agni_builder_gutenberg_blocks_css_hotspot( $block_settings, $block_classname ){
        $styles = "";

        $hotspot_spots = isset( $block_settings['spots'] ) ? $block_settings['spots'] : '';

        if( !empty( $hotspot_spots ) ){
            foreach ($hotspot_spots as $key => $spot) {
                $styles .= "
                {$block_classname} .spot-{$spot['id']}{
                    top: {$spot['y']}%;
                    left: {$spot['x']}%;
                }
                ";
            }
        }

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_testimonials' ) ){
    function agni_builder_gutenberg_blocks_css_testimonials( $block_settings, $block_classname ){
        $styles = "";

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : ''; 


        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_testimonials_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_testimonials_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_testimonials_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_testimonials_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_testimonials_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_testimonials_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_testimonials_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_testimonials_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : ''
            ));
        $styles .= "}";

        return $styles;
    }
}



if( !function_exists( 'agni_builder_gutenberg_blocks_css_testimonial' ) ){
    function agni_builder_gutenberg_blocks_css_testimonial( $block_settings, $block_classname ){
        $styles = "";

        $image_width = isset( $block_settings['imageWidth'] ) ? $block_settings['imageWidth'] : '';
        $image_height = isset( $block_settings['imageHeight'] ) ? $block_settings['imageHeight'] : '';
        $image_border_radius = isset( $block_settings['imageCssBorderRadius'] ) ? $block_settings['imageCssBorderRadius'] : '';
        $content_padding = isset( $block_settings['contentCssPadding'] ) ? $block_settings['contentCssPadding'] : '';
        $content_radius = isset( $block_settings['contentCssBorderRadius'] ) ? $block_settings['contentCssBorderRadius'] : '';
        $content_background_color = isset( $block_settings['contentCssBackgroundColor'] ) ? $block_settings['contentCssBackgroundColor'] : '';
        $content_border_color = isset( $block_settings['contentCssBorderColor'] ) ? $block_settings['contentCssBorderColor'] : '';
        $content_color = isset( $block_settings['contentCssColor'] ) ? $block_settings['contentCssColor'] : '';
        $content_font_size = isset( $block_settings['contentCssFontSize'] ) ? $block_settings['contentCssFontSize'] : '';
        $author_color = isset( $block_settings['authorCssColor'] ) ? $block_settings['authorCssColor'] : '';
        $author_font_size = isset( $block_settings['authorCssFontSize'] ) ? $block_settings['authorCssFontSize'] : '';
        $author_description_color = isset( $block_settings['authorDescriptionCssColor'] ) ? $block_settings['authorDescriptionCssColor'] : '';
        $author_description_font_size = isset( $block_settings['authorDescriptionCssFontSize'] ) ? $block_settings['authorDescriptionCssFontSize'] : '';
        

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_testimonial_avatar_max_width' => $image_width,
                '--agni_block_testimonial_avatar_max_height' => $image_height,
                '--agni_block_testimonial_avatar_radius' => $image_border_radius,

                '--agni_block_testimonial_content_padding_desktop' => isset($content_padding['desktop']) ? $content_padding['desktop'] : '',
                '--agni_block_testimonial_content_padding_laptop' => isset($content_padding['laptop']) ? $content_padding['laptop'] : '',
                '--agni_block_testimonial_content_padding_tab' => isset($content_padding['tab']) ? $content_padding['tab'] : '',
                '--agni_block_testimonial_content_padding_mobile' => isset($content_padding['mobile']) ? $content_padding['mobile'] : '',
                '--agni_block_testimonial_content_radius' => $content_radius,
                '--agni_block_testimonial_content_background_color' => $content_background_color,
                '--agni_block_testimonial_content_border_color' => $content_border_color,
                '--agni_block_testimonial_content_color' => $content_color,
                '--agni_block_testimonial_content_font_size' => $content_font_size,

                '--agni_block_testimonial_author_description_color' => $author_description_color,
                '--agni_block_testimonial_author_description_font_size' => $author_description_font_size,

                '--agni_block_testimonial_author_color' => $author_color,
                '--agni_block_testimonial_author_font_size' => $author_font_size,
            ));
        $styles .= "}";
        
        return $styles;
    }
}



if( !function_exists( 'agni_builder_gutenberg_blocks_css_toggle' ) ){
    function agni_builder_gutenberg_blocks_css_toggle( $block_settings, $block_classname ){
        $styles = "";

        $font_size = isset($block_settings['titleCssFontSize']) ? $block_settings['titleCssFontSize'] : '';
        $border_radius = isset($block_settings['titleCssBorderRadius']) ? $block_settings['titleCssBorderRadius'] : '';

        $background_color = isset($block_settings['titleCssBackgroundColor']) ? $block_settings['titleCssBackgroundColor'] : '';
        $border_color = isset($block_settings['titleCssBorderColor']) ? $block_settings['titleCssBorderColor'] : '';
        $color = isset($block_settings['titleCssColor']) ? $block_settings['titleCssColor'] : '';
        $active_background_color = isset($block_settings['titleActiveCssBackgroundColor']) ? $block_settings['titleActiveCssBackgroundColor'] : '';
        $active_border_color = isset($block_settings['titleActiveCssBorderColor']) ? $block_settings['titleActiveCssBorderColor'] : '';
        $active_color = isset($block_settings['titleActiveCssColor']) ? $block_settings['titleActiveCssColor'] : '';

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_toggle_title_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
                '--agni_block_toggle_title_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
                '--agni_block_toggle_title_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
                '--agni_block_toggle_title_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

                '--agni_block_toggle_title_border_radius' => $border_radius,

                '--agni_block_toggle_title_background_color' => $background_color,
                '--agni_block_toggle_title_border_color' => $border_color,
                '--agni_block_toggle_title_color' => $color,
                '--agni_block_toggle_title_active_background_color' => $active_background_color,
                '--agni_block_toggle_title_active_border_color' => $active_border_color,
                '--agni_block_toggle_title_active_color' => $active_color,
            ));
        $styles .= "}";


        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_accordion' ) ){
    function agni_builder_gutenberg_blocks_css_accordion( $block_settings, $block_classname ){
        $styles = "";

        $font_size = isset($block_settings['titleCssFontSize']) ? $block_settings['titleCssFontSize'] : '';
        $border_radius = isset($block_settings['titleCssBorderRadius']) ? $block_settings['titleCssBorderRadius'] : '';

        $background_color = isset($block_settings['titleCssBackgroundColor']) ? $block_settings['titleCssBackgroundColor'] : '';
        $border_color = isset($block_settings['titleCssBorderColor']) ? $block_settings['titleCssBorderColor'] : '';
        $color = isset($block_settings['titleCssColor']) ? $block_settings['titleCssColor'] : '';
        $active_background_color = isset($block_settings['titleActiveCssBackgroundColor']) ? $block_settings['titleActiveCssBackgroundColor'] : '';
        $active_border_color = isset($block_settings['titleActiveCssBorderColor']) ? $block_settings['titleActiveCssBorderColor'] : '';
        $active_color = isset($block_settings['titleActiveCssColor']) ? $block_settings['titleActiveCssColor'] : '';

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_toggle_title_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
                '--agni_block_toggle_title_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
                '--agni_block_toggle_title_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
                '--agni_block_toggle_title_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

                '--agni_block_toggle_title_border_radius' => $border_radius,

                '--agni_block_toggle_title_background_color' => $background_color,
                '--agni_block_toggle_title_border_color' => $border_color,
                '--agni_block_toggle_title_color' => $color,
                '--agni_block_toggle_title_active_background_color' => $active_background_color,
                '--agni_block_toggle_title_active_border_color' => $active_border_color,
                '--agni_block_toggle_title_active_color' => $active_color,
            ));
        $styles .= "}";

        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_tabs' ) ){
    function agni_builder_gutenberg_blocks_css_tabs( $block_settings, $block_classname ){
        $styles = "";

        $font_size = isset($block_settings['titleCssFontSize']) ? $block_settings['titleCssFontSize'] : '';
        
        $border_color = isset($block_settings['titleCssBorderColor']) ? $block_settings['titleCssBorderColor'] : '';
        $color = isset($block_settings['titleCssColor']) ? $block_settings['titleCssColor'] : '';
        $active_background_color = isset($block_settings['titleActiveCssBackgroundColor']) ? $block_settings['titleActiveCssBackgroundColor'] : '';
        $active_border_color = isset($block_settings['titleActiveCssBorderColor']) ? $block_settings['titleActiveCssBorderColor'] : '';
        $active_color = isset($block_settings['titleActiveCssColor']) ? $block_settings['titleActiveCssColor'] : '';

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_tabs_title_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
                '--agni_block_tabs_title_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
                '--agni_block_tabs_title_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
                '--agni_block_tabs_title_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

                '--agni_block_tabs_title_border_color' => $border_color,
                '--agni_block_tabs_title_color' => $color,
                '--agni_block_tabs_title_active_background_color' => $active_background_color,
                '--agni_block_tabs_title_active_border_color' => $active_border_color,
                '--agni_block_tabs_title_active_color' => $active_color,
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_instagram' ) ){
    function agni_builder_gutenberg_blocks_css_instagram( $block_settings, $block_classname ){
        $styles = "";

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(
                '--agni_block_instagram_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_instagram_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_instagram_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_instagram_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_instagram_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_instagram_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_instagram_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_instagram_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : ''
                
            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_recently_viewed_products' ) ){
    function agni_builder_gutenberg_blocks_css_recently_viewed_products( $block_settings, $block_classname ){
        $styles = "";

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';

        $heading_font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
        $heading_color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';
        $header_margin_bottom = isset( $block_settings['headerCssMarginBottom'] ) ? $block_settings['headerCssMarginBottom'] : '15px';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';


        $styles .= "{$block_classname} ul.products{";
            $styles .=  agni_builder_prepare_css_styles(array(
                '--agni_block_recently_viewed_products_gap' => $gap,

                '--agni_block_recently_viewed_products_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_recently_viewed_products_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_recently_viewed_products_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_recently_viewed_products_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',
                
            ));
        $styles .= "}";


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(

                '--agni_block_recently_viewed_products_heading_font_size_desktop' => isset($heading_font_size['desktop']) ? $heading_font_size['desktop'] : '',
                '--agni_block_recently_viewed_products_heading_font_size_laptop' => isset($heading_font_size['laptop']) ? $heading_font_size['laptop'] : '',
                '--agni_block_recently_viewed_products_heading_font_size_tab' => isset($heading_font_size['tab']) ? $heading_font_size['tab'] : '',
                '--agni_block_recently_viewed_products_heading_font_size_mobile' => isset($heading_font_size['mobile']) ? $heading_font_size['mobile'] : '',
                '--agni_block_recently_viewed_products_heading_color' => isset($heading_color) ? $heading_color : '',

                '--agni_block_recently_viewed_products_header_margin_bottom' => $header_margin_bottom
            ) );
        $styles .= "}";

        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_products' ) ){
    function agni_builder_gutenberg_blocks_css_products( $block_settings, $block_classname ){
        $styles = "";
        
        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $rows = isset( $block_settings['rows'] ) ? $block_settings['rows'] : '';
        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';
        $display_style = isset( $block_settings['display_style'] ) ? $block_settings['display_style'] : '1';
        $img_max_width = isset( $block_settings['imgMaxWidth'] ) ? $block_settings['imgMaxWidth'] : '';
        $img_size = isset( $block_settings['imgSize'] ) ? $block_settings['imgSize'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '0px';


        $img_border_radius = isset( $block_settings['imgCssBorderRadius'] ) ? $block_settings['imgCssBorderRadius'] : '';

        $product_bg_color = isset( $block_settings['productBackgroundColor'] ) ? $block_settings['productBackgroundColor'] : '';
        // $product_border_color = isset( $block_settings['productBorderColor'] ) ? $block_settings['productBorderColor'] : '';
        $product_hover_bg_color = isset( $block_settings['productHoverBackgroundColor'] ) ? $block_settings['productHoverBackgroundColor'] : '';
        $product_hover_border_color = isset( $block_settings['productHoverBorderColor'] ) ? $block_settings['productHoverBorderColor'] : '';
        $product_padding = isset( $block_settings['productPadding'] ) ? $block_settings['productPadding'] : '';$product_border_radius = isset( $block_settings['productBorderRadius'] ) ? $block_settings['productBorderRadius'] : '';

        $header_btn_color = isset( $block_settings['buttonCssColor'] ) ? $block_settings['buttonCssColor'] : '';
        $heading_font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
        $heading_color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';

        $header_border = isset( $block_settings['headerOutlined'] ) ? $block_settings['headerOutlined'] : '';
        $header_border_color = isset( $block_settings['headerCssBorderColor'] ) ? $block_settings['headerCssBorderColor'] : '';
        $header_background_color = isset( $block_settings['headerCssBackgroundColor'] ) ? $block_settings['headerCssBackgroundColor'] : '';
        $header_background_gradient = isset( $block_settings['headerCssBackgroundImage'] ) ? $block_settings['headerCssBackgroundImage'] : '';
        $header_border_top_width = isset( $block_settings['headerCssBorderTopWidth'] ) ? $block_settings['headerCssBorderTopWidth'] : '0px';
        $header_border_bottom_width = isset( $block_settings['headerCssBorderBottomWidth'] ) ? $block_settings['headerCssBorderBottomWidth'] : '1px';
        $header_margin_bottom = isset( $block_settings['headerCssMarginBottom'] ) ? $block_settings['headerCssMarginBottom'] : '15px';
        // $img_aspect_ratio = isset( $block_settings['imgAspectRatio'] ) ? $block_settings['imgAspectRatio'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';

        if( !empty($img_size) ){
            $styles .= "
            {$block_classname} .has-grid-layout{
                --agni_block_products_thumbnail_aspect_ratio: {$img_size};
            }
            ";
        }

        if( !empty( $width_ratio ) ){
            // print_r( $width_ratio );

            $width_ratio_array = array();

            foreach ($width_ratio as $key => $ratio) {

                
                if( isset($ratio['value']) && !empty( $ratio['value'] ) ){
                    $ratio_value = str_replace( '_', '.', $ratio['value'] );
                }
                else{
                    $ratio_value = '1x1';
                }

                $ratio_array = explode('x', $ratio_value);

                $newRatioArray = array();

                foreach ($ratio_array as $key => $value) {
                    $newRatioArray[] = $value * 2;
                }

                $ratio_row_pos = $ratio_col_pos = array(
                    'desktop' => 1,
                    'laptop' => 1,
                    'tab' => 1,
                    'mobile' => 1,
                );
                
                if( (isset($ratio['rowPos']) && !empty($ratio['rowPos'])) ){
                    foreach ($ratio['rowPos'] as $device => $value) {
                        $ratio_row_pos[$device] = $value;
                    }
                }

                if( (isset($ratio['colPos']) && !empty($ratio['colPos'])) ){
                    foreach ($ratio['colPos'] as $device => $value) {
                        $ratio_col_pos[$device] = $value;
                    }
                }


                $width_ratio_array[] = array(
                    'index' => $ratio['index'], 
                    'value' => $newRatioArray,
                    'colPos' => $ratio_col_pos, 
                    'rowPos' => $ratio_row_pos, 
                );

                $aspect_ratio_css = implode( '/', $ratio_array );

                if( $aspect_ratio_css != '1/1' ){
                    $ratio_index = $ratio['index'] + 1;
                    $styles .= "{$block_classname} .has-grid-layout >li:nth-child({$ratio_index}){";
                        $styles .= "
                            --agni_block_products_thumbnail_aspect_ratio: {$aspect_ratio_css};
                        ";
                    $styles .= "}";
                }
                
            }
            // print_r( $width_ratio_array );

            $indexes = array_column($width_ratio_array, 'index');

            array_multisort($indexes, SORT_ASC, $width_ratio_array);

            foreach ($width_ratio_array as $key => $ratio) {

                $ratio_index = $ratio['index'] + 1;
                $styles .= "{$block_classname} .has-grid-layout >li:nth-child({$ratio_index}){";
                foreach ($ratio['colPos'] as $colDevice => $colPos) {
                    foreach ($ratio['rowPos'] as $rowDevice => $rowPos) {
                        if( $colDevice == $rowDevice ){
                            $end_col_position = $colPos + $ratio['value'][0]; 
                            $end_row_position = $rowPos + $ratio['value'][1]; 
                            $styles .= "
                                --agni_block_products_grid_column_pos_{$colDevice}: {$colPos}/{$end_col_position};
                                --agni_block_products_grid_row_pos_{$colDevice}: {$rowPos}/{$end_row_position};
                            ";
                        }
                    }
                }
                $styles .= "}";
            }
            
        }


        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }

        $styles .= "{$block_classname} ul.products{";
            $styles .=  agni_builder_prepare_css_styles(array(
                '--agni_block_products_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_products_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_products_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_products_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_products_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_products_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_products_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_products_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',
            ));
        $styles .= "}";


        if( $display_style == '6' && !empty( $product_border_color ) ){
            $styles .= "{$block_classname}{";
                $styles .= agni_builder_prepare_css_styles( array(
                    '--cartify_product_style_product_border_width' => '1px'
                ));
            $styles .= "}";
        }

        
        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_products_header_border_top_width' => $header_border_top_width,
                '--agni_block_products_header_border_bottom_width' => $header_border_bottom_width,
                '--agni_block_products_header_border_color' => $header_border_color,
                '--agni_block_products_header_background_color' => $header_background_color,
                '--agni_block_products_header_background_gradient' => $header_background_gradient,
                '--agni_block_products_header_btn_color' => $header_btn_color,

                '--agni_block_products_heading_font_size_desktop' => isset($heading_font_size['desktop']) ? $heading_font_size['desktop'] : '',
                '--agni_block_products_heading_font_size_laptop' => isset($heading_font_size['laptop']) ? $heading_font_size['laptop'] : '',
                '--agni_block_products_heading_font_size_tab' => isset($heading_font_size['tab']) ? $heading_font_size['tab'] : '',
                '--agni_block_products_heading_font_size_mobile' => isset($heading_font_size['mobile']) ? $heading_font_size['mobile'] : '',
                '--agni_block_products_heading_color' => isset($heading_color) ? $heading_color : '',

                '--agni_block_products_header_margin_bottom' => $header_margin_bottom,

                '--agni_block_products_image_border_radius' => $img_border_radius,
                '--agni_block_products_image_max_width' => !empty($img_max_width) ? $img_max_width . 'px' : '',
                '--agni_block_products_image_background_color' => $product_bg_color,

                '--cartify_product_style_product_image_max_width' => !empty($img_max_width) ? $img_max_width . 'px' : '',

                '--cartify_product_style_product_hover_background_color' => $product_hover_bg_color,
                '--cartify_product_style_product_hover_border_color' => $product_hover_border_color,'--cartify_product_style_product_border_radius' => $product_border_radius,

                '--cartify_product_style_inner_padding_desktop' => isset($product_padding['desktop']) ? $product_padding['desktop'] : '',
                '--cartify_product_style_inner_padding_laptop' => isset($product_padding['laptop']) ? $product_padding['laptop'] : '',
                '--cartify_product_style_inner_padding_tab' => isset($product_padding['tab']) ? $product_padding['tab'] : '',
                '--cartify_product_style_inner_padding_mobile' => isset($product_padding['mobile']) ? $product_padding['mobile'] : '',

                '--agni_block_products_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_products_background_color' => $background_color,
                '--agni_block_products_background_gradient' => $background_gradient,
                '--agni_block_products_background_image_url' => 'url(' . $background_url . ')',
                '--agni_block_products_background_image_position' => $background_position,
                '--agni_block_products_background_image_size' => $background_size,
                '--agni_block_products_background_image_repeat' => $background_repeat,

                'border-color' => $border_color,
                'border-radius' => $border_radius,
            ) );
        $styles .= "}";

        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_products_categories' ) ){
    function agni_builder_gutenberg_blocks_css_products_categories( $block_settings, $block_classname ){
        $styles = "";
        
           
        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $rows = isset( $block_settings['rows'] ) ? $block_settings['rows'] : '';
        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';
        $display_style = isset( $block_settings['display_style'] ) ? $block_settings['display_style'] : '1';
        $img_max_width = isset( $block_settings['imgMaxWidth'] ) ? $block_settings['imgMaxWidth'] : '';
        $img_size = isset( $block_settings['imgSize'] ) ? $block_settings['imgSize'] : '';

        $img_border_radius = isset( $block_settings['imgBorderRadius'] ) ? $block_settings['imgBorderRadius'] : '';

        $category_color = isset( $block_settings['categoryColor'] ) ? $block_settings['categoryColor'] : '';
        $category_bg_color = isset( $block_settings['categoryBackgroundColor'] ) ? $block_settings['categoryBackgroundColor'] : '';
        $category_border_color = isset( $block_settings['categoryBorderColor'] ) ? $block_settings['categoryBorderColor'] : '';

        $hover_category_color = isset( $block_settings['hoverCategoryColor'] ) ? $block_settings['hoverCategoryColor'] : '';
        $hover_category_bg_color = isset( $block_settings['hoverCategoryBackgroundColor'] ) ? $block_settings['hoverCategoryBackgroundColor'] : '';
        $hover_category_border_color = isset( $block_settings['hoverCategoryBorderColor'] ) ? $block_settings['hoverCategoryBorderColor'] : '';

        $category_padding = isset( $block_settings['categoryPadding'] ) ? $block_settings['categoryPadding'] : '';
        $category_alignment = isset( $block_settings['categoryAlignment'] ) ? $block_settings['categoryAlignment'] : '';$category_border_radius = isset( $block_settings['categoryBorderRadius'] ) ? $block_settings['categoryBorderRadius'] : '';

        $header_btn_color = isset( $block_settings['buttonCssColor'] ) ? $block_settings['buttonCssColor'] : '';
        $heading_font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
        $heading_color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';

        $header_border = isset( $block_settings['headerOutlined'] ) ? $block_settings['headerOutlined'] : '';
        $header_border_color = isset( $block_settings['headerCssBorderColor'] ) ? $block_settings['headerCssBorderColor'] : '';
        $header_background_color = isset( $block_settings['headerCssBackgroundColor'] ) ? $block_settings['headerCssBackgroundColor'] : '';
        $header_background_gradient = isset( $block_settings['headerCssBackgroundImage'] ) ? $block_settings['headerCssBackgroundImage'] : '';
        $header_border_top_width = isset( $block_settings['headerCssBorderTopWidth'] ) ? $block_settings['headerCssBorderTopWidth'] : '0px';
        $header_border_bottom_width = isset( $block_settings['headerCssBorderBottomWidth'] ) ? $block_settings['headerCssBorderBottomWidth'] : '1px';
        // $img_aspect_ratio = isset( $block_settings['imgAspectRatio'] ) ? $block_settings['imgAspectRatio'] : '';


        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';


        if( !empty($img_size) ){
            $styles .= "
            {$block_classname} .has-grid-layout{
                --agni_block_products_thumbnail_aspect_ratio: {$img_size};
            }
            ";
        }

         if( !empty( $width_ratio ) ){
            // print_r( $width_ratio );

            $width_ratio_array = array();

            foreach ($width_ratio as $key => $ratio) {
                
                if( isset($ratio['value']) && !empty( $ratio['value'] ) ){
                    $ratio_value = str_replace( '_', '.', $ratio['value'] );
                }
                else{
                    $ratio_value = '1x1';
                }

                $ratio_array = explode('x', $ratio_value);

                $newRatioArray = array();

                foreach ($ratio_array as $key => $value) {
                    $newRatioArray[] = $value * 2;
                }

                $ratio_row_pos = $ratio_col_pos = array(
                    'desktop' => 1,
                    'laptop' => 1,
                    'tab' => 1,
                    'mobile' => 1,
                );
                
                if( (isset($ratio['rowPos']) && !empty($ratio['rowPos'])) ){
                    foreach ($ratio['rowPos'] as $device => $value) {
                        $ratio_row_pos[$device] = $value;
                    }
                }

                if( (isset($ratio['colPos']) && !empty($ratio['colPos'])) ){
                    foreach ($ratio['colPos'] as $device => $value) {
                        $ratio_col_pos[$device] = $value;
                    }
                }

                $width_ratio_array[] = array(
                    'index' => $ratio['index'], 
                    'value' => $newRatioArray,
                    'colPos' => $ratio_col_pos, 
                    'rowPos' => $ratio_row_pos, 
                );

                $aspect_ratio_css = implode( '/', $ratio_array );

                if( $aspect_ratio_css != '1/1' ){
                    $ratio_index = $ratio['index'] + 1;
                    $styles .= "{$block_classname} .has-grid-layout >li:nth-child({$ratio_index}){";
                        $styles .= "
                            --agni_block_products_thumbnail_aspect_ratio: {$aspect_ratio_css};
                        ";
                    $styles .= "}";
                }
                
            }
            // print_r( $width_ratio_array );

            $indexes = array_column($width_ratio_array, 'index');

            array_multisort($indexes, SORT_ASC, $width_ratio_array);

            foreach ($width_ratio_array as $key => $ratio) {
                
                $ratio_index = $ratio['index'] + 1;

                $styles .= "{$block_classname} .has-grid-layout >li:nth-child({$ratio_index}){";
                foreach ($ratio['colPos'] as $colDevice => $colPos) {
                    foreach ($ratio['rowPos'] as $rowDevice => $rowPos) {
                        if( $colDevice == $rowDevice ){
                            $end_col_position = $colPos + $ratio['value'][0]; 
                            $end_row_position = $rowPos + $ratio['value'][1]; 
                            $styles .= "
                                --agni_block_products_grid_column_pos_{$colDevice}: {$colPos}/{$end_col_position};
                                --agni_block_products_grid_row_pos_{$colDevice}: {$rowPos}/{$end_row_position};
                            ";

                        }
                    }
                }
                $styles .= "}";
            }
        }


        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(

                '--agni_block_products_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_products_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_products_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_products_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_products_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_products_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_products_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_products_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',
            ));
        $styles .= "}";


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_products_header_border_top_width' => $header_border_top_width,
                '--agni_block_products_header_border_bottom_width' => $header_border_bottom_width,
                '--agni_block_products_header_border_color' => $header_border_color,
                '--agni_block_products_header_background_color' => $header_background_color,
                '--agni_block_products_header_background_gradient' => $header_background_gradient,
                '--agni_block_products_header_btn_color' => $header_btn_color,

                '--agni_block_products_heading_font_size_desktop' => isset($heading_font_size['desktop']) ? $heading_font_size['desktop'] : '',
                '--agni_block_products_heading_font_size_laptop' => isset($heading_font_size['laptop']) ? $heading_font_size['laptop'] : '',
                '--agni_block_products_heading_font_size_tab' => isset($heading_font_size['tab']) ? $heading_font_size['tab'] : '',
                '--agni_block_products_heading_font_size_mobile' => isset($heading_font_size['mobile']) ? $heading_font_size['mobile'] : '',
                '--agni_block_products_heading_color' => isset($heading_color) ? $heading_color : '',

                '--agni_block_products_image_border_radius' => $img_border_radius,
                '--agni_block_products_image_max_width' => !empty($img_max_width) ? $img_max_width . 'px' : '',

                '--agni_block_products_categories_color' => $category_color,
                '--cartify_product_category_style_category_background_color' => $category_bg_color,
                '--cartify_product_category_style_category_border_color' => $category_border_color,

                '--agni_block_products_categories_hover_color' => $hover_category_color,
                '--cartify_product_category_style_hover_category_background_color' => $hover_category_bg_color,
                '--cartify_product_category_style_hover_category_border_color' => $hover_category_border_color,

                '--cartify_product_category_style_category_border_radius' => $category_border_radius,

                '--cartify_product_category_style_inner_padding_desktop' => isset($category_padding['desktop']) ? $category_padding['desktop'] : '',
                '--cartify_product_category_style_inner_padding_laptop' => isset($category_padding['laptop']) ? $category_padding['laptop'] : '',
                '--cartify_product_category_style_inner_padding_tab' => isset($category_padding['tab']) ? $category_padding['tab'] : '',
                '--cartify_product_category_style_inner_padding_mobile' => isset($category_padding['mobile']) ? $category_padding['mobile'] : '',

                '--cartify_product_category_style_category_alignment' => $category_alignment,
                

                '--agni_block_products_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_products_background_color' => $background_color,
                '--agni_block_products_background_gradient' => $background_gradient,
                '--agni_block_products_background_image_url' => 'url(' . $background_url . ')',
                '--agni_block_products_background_image_position' => $background_position,
                '--agni_block_products_background_image_size' => $background_size,
                '--agni_block_products_background_image_repeat' => $background_repeat,

                'border-color' => $border_color,
                'border-radius' => $border_radius,
            ) );
        $styles .= "}";


        return $styles;
    }
}


if( !function_exists( 'agni_builder_gutenberg_blocks_css_products_brands' ) ){
    function agni_builder_gutenberg_blocks_css_products_brands( $block_settings, $block_classname ){
        $styles = "";

        // print_r($block_settings);
        
        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        // $display_style = isset( $block_settings['display_style'] ) ? $block_settings['display_style'] : '1';
        $img_max_width = isset( $block_settings['imgMaxWidth'] ) ? $block_settings['imgMaxWidth'] : '';
        $img_max_height = isset( $block_settings['imgMaxHeight'] ) ? $block_settings['imgMaxHeight'] : '';

        $brand_filled = isset( $block_settings['brandFilled'] ) ? $block_settings['brandFilled'] : '';
        $brand_outlined = isset( $block_settings['brandOutlined'] ) ? $block_settings['brandOutlined'] : '';
        $brand_bg_color = isset( $block_settings['brandBackgroundColor'] ) ? $block_settings['brandBackgroundColor'] : '';
        $brand_border_color = isset( $block_settings['brandBorderColor'] ) ? $block_settings['brandBorderColor'] : '';
        $brand_padding = isset( $block_settings['brandPadding'] ) ? $block_settings['brandPadding'] : '';

        // $img_aspect_ratio = isset( $block_settings['imgAspectRatio'] ) ? $block_settings['imgAspectRatio'] : '';
       

        $styles .= "{$block_classname} {";
            $styles .= agni_builder_prepare_css_styles(array(

                '--agni_block_products_brands_gap_desktop' => isset( $gap['desktop'] ) ? $gap['desktop'] : '',
                '--agni_block_products_brands_gap_laptop' => isset( $gap['laptop'] ) ? $gap['laptop'] : '',
                '--agni_block_products_brands_gap_tab' => isset( $gap['tab'] ) ? $gap['tab'] : '',
                '--agni_block_products_brands_gap_mobile' => isset( $gap['mobile'] ) ? $gap['mobile'] : '',

                '--agni_block_products_brands_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_products_brands_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_products_brands_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_products_brands_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_products_brands_img_width' => $img_max_width,
                '--agni_block_products_brands_brand_background_color' => $brand_bg_color,
                '--agni_block_products_brands_brand_border_color' => $brand_border_color,

                '--agni_block_products_brands_brand_inner_padding_desktop' => isset($brand_padding['desktop']) ? $brand_padding['desktop'] : '',
                '--agni_block_products_brands_brand_inner_padding_laptop' => isset($brand_padding['laptop']) ? $brand_padding['laptop'] : '',
                '--agni_block_products_brands_brand_inner_padding_tab' => isset($brand_padding['tab']) ? $brand_padding['tab'] : '',
                '--agni_block_products_brands_brand_inner_padding_mobile' => isset($brand_padding['mobile']) ? $brand_padding['mobile'] : '',

            ));
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_products_tab' ) ){
    function agni_builder_gutenberg_blocks_css_products_tab( $block_settings, $block_classname ){
        $styles = "";
        

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $rows = isset( $block_settings['rows'] ) ? $block_settings['rows'] : '';
        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';
        $display_style = isset( $block_settings['display_style'] ) ? $block_settings['display_style'] : '1';
        $img_max_width = isset( $block_settings['imgMaxWidth'] ) ? $block_settings['imgMaxWidth'] : '';
        $img_size = isset( $block_settings['imgSize'] ) ? $block_settings['imgSize'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '0px';


        $img_border_radius = isset( $block_settings['imgCssBorderRadius'] ) ? $block_settings['imgCssBorderRadius'] : '';

        $product_bg_color = isset( $block_settings['productBackgroundColor'] ) ? $block_settings['productBackgroundColor'] : '';
        // $product_border_color = isset( $block_settings['productBorderColor'] ) ? $block_settings['productBorderColor'] : '';
        $product_hover_bg_color = isset( $block_settings['productHoverBackgroundColor'] ) ? $block_settings['productHoverBackgroundColor'] : '';
        $product_hover_border_color = isset( $block_settings['productHoverBorderColor'] ) ? $block_settings['productHoverBorderColor'] : '';
        $product_padding = isset( $block_settings['productPadding'] ) ? $block_settings['productPadding'] : '';

        $header_btn_color = isset( $block_settings['buttonCssColor'] ) ? $block_settings['buttonCssColor'] : '';
        $heading_font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
        $heading_color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';

        $header_border = isset( $block_settings['headerOutlined'] ) ? $block_settings['headerOutlined'] : '';
        $header_border_color = isset( $block_settings['headerCssBorderColor'] ) ? $block_settings['headerCssBorderColor'] : '';
        $header_background_color = isset( $block_settings['headerCssBackgroundColor'] ) ? $block_settings['headerCssBackgroundColor'] : '';
        $header_background_gradient = isset( $block_settings['headerCssBackgroundImage'] ) ? $block_settings['headerCssBackgroundImage'] : '';
        $header_border_top_width = isset( $block_settings['headerCssBorderTopWidth'] ) ? $block_settings['headerCssBorderTopWidth'] : '0px';
        $header_border_bottom_width = isset( $block_settings['headerCssBorderBottomWidth'] ) ? $block_settings['headerCssBorderBottomWidth'] : '1px';
        $header_margin_bottom = isset( $block_settings['headerCssMarginBottom'] ) ? $block_settings['headerCssMarginBottom'] : '15px';
        // $img_aspect_ratio = isset( $block_settings['imgAspectRatio'] ) ? $block_settings['imgAspectRatio'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';

        $icon_size = isset( $block_settings['iconSize'] ) ? $block_settings['iconSize'] : '';
        $tab_gap = isset( $block_settings['tabGap'] ) ? $block_settings['tabGap'] : '';


        if( !empty($img_size) ){
            $styles .= "
            {$block_classname} .has-grid-layout{
                --agni_block_products_thumbnail_aspect_ratio: {$img_size};
            }
            ";
        }

        if( !empty( $width_ratio ) ){
            // print_r( $width_ratio );

            $width_ratio_array = array();

            foreach ($width_ratio as $key => $ratio) {
                
                if( isset($ratio['value']) && !empty( $ratio['value'] ) ){
                    $ratio_value = str_replace( '_', '.', $ratio['value'] );
                }
                else{
                    $ratio_value = '1x1';
                }

                $ratio_array = explode('x', $ratio_value);

                $newRatioArray = array();

                foreach ($ratio_array as $key => $value) {
                    $newRatioArray[] = $value * 2;
                }

                $ratio_row_pos = $ratio_col_pos = array(
                    'desktop' => 1,
                    'laptop' => 1,
                    'tab' => 1,
                    'mobile' => 1,
                );
                
                if( (isset($ratio['rowPos']) && !empty($ratio['rowPos'])) ){
                    foreach ($ratio['rowPos'] as $device => $value) {
                        $ratio_row_pos[$device] = $value;
                    }
                }

                if( (isset($ratio['colPos']) && !empty($ratio['colPos'])) ){
                    foreach ($ratio['colPos'] as $device => $value) {
                        $ratio_col_pos[$device] = $value;
                    }
                }


                $width_ratio_array[] = array(
                    'index' => $ratio['index'], 
                    'value' => $newRatioArray,
                    'colPos' => $ratio_col_pos, 
                    'rowPos' => $ratio_row_pos, 
                );
                
            }
            // print_r( $width_ratio_array );

            $indexes = array_column($width_ratio_array, 'index');

            array_multisort($indexes, SORT_ASC, $width_ratio_array);

            foreach ($width_ratio_array as $key => $ratio) {
                
                $ratio_index = $ratio['index'] + 1;
                $styles .= "{$block_classname} .has-grid-layout >li:nth-child({$ratio_index}){";
                foreach ($ratio['colPos'] as $colDevice => $colPos) {
                    foreach ($ratio['rowPos'] as $rowDevice => $rowPos) {
                        if( $colDevice == $rowDevice ){
                            $end_col_position = $colPos + $ratio['value'][0]; 
                            $end_row_position = $rowPos + $ratio['value'][1]; 
                            $styles .= "
                                --agni_block_products_grid_column_pos_{$colDevice}: {$colPos}/{$end_col_position};
                                --agni_block_products_grid_row_pos_{$colDevice}: {$rowPos}/{$end_row_position};
                            ";
                        }
                    }
                }
                $styles .= "}";
            }
        }


        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }


        if( !empty( $icon_size ) ){
            $styles .= "
            {$block_classname} .agni-block-products-tab__tab-icon i {
                font-size: {$icon_size};
            }
            {$block_classname} .agni-block-products-tab__tab-icon svg {
                width: {$icon_size};
                height: {$icon_size};
            }
            ";
        }

        if( $display_style == '6' && !empty( $product_border_color ) ){
            $styles .= "{$block_classname}{";
                $styles .= agni_builder_prepare_css_styles( array(
                    '--cartify_product_style_product_border_width' => '1px'
                ));
            $styles .= "}";
        }

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_products_tab_gap' => $tab_gap,
                '--agni_block_products_header_margin_bottom' => $header_margin_bottom
            ));
        $styles .= "}";
        
        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_products_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_products_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_products_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_products_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_products_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_products_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_products_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_products_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',
            ));
        $styles .= "}";

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_products_header_border_top_width' => $header_border_top_width,
                '--agni_block_products_header_border_bottom_width' => $header_border_bottom_width,
                '--agni_block_products_header_border_color' => $header_border_color,
                '--agni_block_products_header_background_color' => $header_background_color,
                '--agni_block_products_header_background_gradient' => $header_background_gradient,
                '--agni_block_products_header_btn_color' => $header_btn_color,

                '--agni_block_products_heading_font_size_desktop' => isset($heading_font_size['desktop']) ? $heading_font_size['desktop'] : '',
                '--agni_block_products_heading_font_size_laptop' => isset($heading_font_size['laptop']) ? $heading_font_size['laptop'] : '',
                '--agni_block_products_heading_font_size_tab' => isset($heading_font_size['tab']) ? $heading_font_size['tab'] : '',
                '--agni_block_products_heading_font_size_mobile' => isset($heading_font_size['mobile']) ? $heading_font_size['mobile'] : '',
                '--agni_block_products_heading_color' => isset($heading_color) ? $heading_color : '',

                '--agni_block_products_image_border_radius' => $img_border_radius,
                '--agni_block_products_image_max_width' => !empty($img_max_width) ? $img_max_width . 'px' : '',
                '--agni_block_products_image_background_color' => $product_bg_color,

                '--cartify_product_style_product_hover_background_color' => $product_hover_bg_color,
                '--cartify_product_style_product_hover_border_color' => $product_hover_border_color,

                '--cartify_product_style_inner_padding_desktop' => isset($product_padding['desktop']) ? $product_padding['desktop'] : '',
                '--cartify_product_style_inner_padding_laptop' => isset($product_padding['laptop']) ? $product_padding['laptop'] : '',
                '--cartify_product_style_inner_padding_tab' => isset($product_padding['tab']) ? $product_padding['tab'] : '',
                '--cartify_product_style_inner_padding_mobile' => isset($product_padding['mobile']) ? $product_padding['mobile'] : '',

                '--agni_block_products_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_products_background_color' => $background_color,
                '--agni_block_products_background_gradient' => $background_gradient,
                '--agni_block_products_background_image_url' => 'url(' . $background_url . ')',
                '--agni_block_products_background_image_position' => $background_position,
                '--agni_block_products_background_image_size' => $background_size,
                '--agni_block_products_background_image_repeat' => $background_repeat,

                'border-color' => $border_color,
                'border-radius' => $border_radius,
            ) );
        $styles .= "}";
      
        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_products_categories_tab' ) ){
    function agni_builder_gutenberg_blocks_css_products_categories_tab( $block_settings, $block_classname ){
        $styles = "";

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $rows = isset( $block_settings['rows'] ) ? $block_settings['rows'] : '';
        $width_ratio = isset( $block_settings['widthRatio'] ) ? $block_settings['widthRatio'] : '';
        $display_style = isset( $block_settings['display_style'] ) ? $block_settings['display_style'] : '1';
        $img_max_width = isset( $block_settings['imgMaxWidth'] ) ? $block_settings['imgMaxWidth'] : '';
        $img_size = isset( $block_settings['imgSize'] ) ? $block_settings['imgSize'] : '';
        $border_radius = isset( $block_settings['borderRadius'] ) ? $block_settings['borderRadius'] : '0px';


        $img_border_radius = isset( $block_settings['imgCssBorderRadius'] ) ? $block_settings['imgCssBorderRadius'] : '';

        $category_bg_color = isset( $block_settings['categoryBackgroundColor'] ) ? $block_settings['categoryBackgroundColor'] : '';
        $category_border_color = isset( $block_settings['categoryBorderColor'] ) ? $block_settings['categoryBorderColor'] : '';
        $category_padding = isset( $block_settings['categoryPadding'] ) ? $block_settings['categoryPadding'] : '';
        $category_alignment = isset( $block_settings['categoryAlignment'] ) ? $block_settings['categoryAlignment'] : '';

        $header_btn_color = isset( $block_settings['buttonCssColor'] ) ? $block_settings['buttonCssColor'] : '';
        $heading_font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
        $heading_color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';

        $header_border = isset( $block_settings['headerOutlined'] ) ? $block_settings['headerOutlined'] : '';
        $header_border_color = isset( $block_settings['headerCssBorderColor'] ) ? $block_settings['headerCssBorderColor'] : '';
        $header_background_color = isset( $block_settings['headerCssBackgroundColor'] ) ? $block_settings['headerCssBackgroundColor'] : '';
        $header_background_gradient = isset( $block_settings['headerCssBackgroundImage'] ) ? $block_settings['headerCssBackgroundImage'] : '';
        $header_border_top_width = isset( $block_settings['headerCssBorderTopWidth'] ) ? $block_settings['headerCssBorderTopWidth'] : '0px';
        $header_border_bottom_width = isset( $block_settings['headerCssBorderBottomWidth'] ) ? $block_settings['headerCssBorderBottomWidth'] : '1px';
        // $img_aspect_ratio = isset( $block_settings['imgAspectRatio'] ) ? $block_settings['imgAspectRatio'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';

        $icon_size = isset( $block_settings['iconSize'] ) ? $block_settings['iconSize'] : '';


        if( !empty($img_size) ){
            $styles .= "
            {$block_classname} .has-grid-layout{
                --agni_block_products_thumbnail_aspect_ratio: {$img_size};
            }
            ";
        }

        if( !empty( $width_ratio ) ){
            // print_r( $width_ratio );

            $width_ratio_array = array();

            foreach ($width_ratio as $key => $ratio) {
                
                if( isset($ratio['value']) && !empty( $ratio['value'] ) ){
                    $ratio_value = str_replace( '_', '.', $ratio['value'] );
                }
                else{
                    $ratio_value = '1x1';
                }

                $ratio_array = explode('x', $ratio_value);

                $newRatioArray = array();

                foreach ($ratio_array as $key => $value) {
                    $newRatioArray[] = $value * 2;
                }

                $ratio_row_pos = $ratio_col_pos = array(
                    'desktop' => 1,
                    'laptop' => 1,
                    'tab' => 1,
                    'mobile' => 1,
                );
                
                if( (isset($ratio['rowPos']) && !empty($ratio['rowPos'])) ){
                    foreach ($ratio['rowPos'] as $device => $value) {
                        $ratio_row_pos[$device] = $value;
                    }
                }

                if( (isset($ratio['colPos']) && !empty($ratio['colPos'])) ){
                    foreach ($ratio['colPos'] as $device => $value) {
                        $ratio_col_pos[$device] = $value;
                    }
                }


                $width_ratio_array[] = array(
                    'index' => $ratio['index'], 
                    'value' => $newRatioArray,
                    'colPos' => $ratio_col_pos, 
                    'rowPos' => $ratio_row_pos, 
                );
                
            }
            // print_r( $width_ratio_array );

            $indexes = array_column($width_ratio_array, 'index');

            array_multisort($indexes, SORT_ASC, $width_ratio_array);

            foreach ($width_ratio_array as $key => $ratio) {
                
                $ratio_index = $ratio['index'] + 1;
                $styles .= "{$block_classname} .has-grid-layout >li:nth-child({$ratio_index}){";
                foreach ($ratio['colPos'] as $colDevice => $colPos) {
                    foreach ($ratio['rowPos'] as $rowDevice => $rowPos) {
                        if( $colDevice == $rowDevice ){
                            $end_col_position = $colPos + $ratio['value'][0]; 
                            $end_row_position = $rowPos + $ratio['value'][1]; 
                            $styles .= "
                                --agni_block_products_grid_column_pos_{$colDevice}: {$colPos}/{$end_col_position};
                                --agni_block_products_grid_row_pos_{$colDevice}: {$rowPos}/{$end_row_position};
                            ";
                        }
                    }
                }
                $styles .= "}";
            }
        }


        if( !empty($border_width) ){
            $styles .= "
            {$block_classname} {";
            foreach ($border_width as $key => $value) {
                if( !empty( $value ) ){
                    $styles .= "border-{$key}-width: {$value}; ";
                }
            }
            $styles .= "}";
        }


        if( !empty( $icon_size ) ){
            $styles .= "
            {$block_classname} .agni-block-products-tab__tab-icon i {
                font-size: {$icon_size};
            }
            {$block_classname} .agni-block-products-tab__tab-icon svg {
                width: {$icon_size};
                height: {$icon_size};
            }
            ";
        }

        if( $display_style == '6' && !empty( $product_border_color ) ){
            $styles .= "{$block_classname}{";
                $styles .= agni_builder_prepare_css_styles( array(
                    '--cartify_product_style_product_border_width' => '1px'
                ));
            $styles .= "}";
        }

        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(

                '--agni_block_products_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_products_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_products_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_products_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_products_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_products_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_products_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_products_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_products_header_border_top_width' => $header_border_top_width,
                '--agni_block_products_header_border_bottom_width' => $header_border_bottom_width,
                '--agni_block_products_header_border_color' => $header_border_color,
                '--agni_block_products_header_background_color' => $header_background_color,
                '--agni_block_products_header_background_gradient' => $header_background_gradient,
                '--agni_block_products_header_btn_color' => $header_btn_color,

                '--agni_block_products_heading_font_size_desktop' => isset($heading_font_size['desktop']) ? $heading_font_size['desktop'] : '',
                '--agni_block_products_heading_font_size_laptop' => isset($heading_font_size['laptop']) ? $heading_font_size['laptop'] : '',
                '--agni_block_products_heading_font_size_tab' => isset($heading_font_size['tab']) ? $heading_font_size['tab'] : '',
                '--agni_block_products_heading_font_size_mobile' => isset($heading_font_size['mobile']) ? $heading_font_size['mobile'] : '',
                '--agni_block_products_heading_color' => isset($heading_color) ? $heading_color : '',

                '--agni_block_products_image_border_radius' => $img_border_radius,
                '--agni_block_products_image_max_width' => !empty($img_max_width) ? $img_max_width . 'px' : '',

                '--cartify_product_category_style_category_background_color' => $category_bg_color,
                '--cartify_product_category_style_category_border_color' => $category_border_color,

                '--cartify_product_category_style_inner_padding_desktop' => isset($category_padding['desktop']) ? $category_padding['desktop'] : '',
                '--cartify_product_category_style_inner_padding_laptop' => isset($category_padding['laptop']) ? $category_padding['laptop'] : '',
                '--cartify_product_category_style_inner_padding_tab' => isset($category_padding['tab']) ? $category_padding['tab'] : '',
                '--cartify_product_category_style_inner_padding_mobile' => isset($category_padding['mobile']) ? $category_padding['mobile'] : '',

                '--cartify_product_category_style_category_alignment' => $category_alignment,

                '--agni_block_products_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_products_background_color' => $background_color,
                '--agni_block_products_background_gradient' => $background_gradient,
                '--agni_block_products_background_image_url' => 'url(' . $background_url . ')',
                '--agni_block_products_background_image_position' => $background_position,
                '--agni_block_products_background_image_size' => $background_size,
                '--agni_block_products_background_image_repeat' => $background_repeat,

                'border-color' => $border_color,
                'border-radius' => $border_radius,
            ) );
        $styles .= "}";


        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_posts' ) ){
    function agni_builder_gutenberg_blocks_css_posts( $block_settings, $block_classname ){
        $styles = '';

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        $img_size = isset( $block_settings['imgSize'] ) ? $block_settings['imgSize'] : '';

   
        $header_btn_color = isset( $block_settings['buttonCssColor'] ) ? $block_settings['buttonCssColor'] : '';
        $heading_font_size = isset( $block_settings['headingCssFontSize'] ) ? $block_settings['headingCssFontSize'] : '';
        $heading_color = isset( $block_settings['headingCssColor'] ) ? $block_settings['headingCssColor'] : '';

        $header_border = isset( $block_settings['headerOutlined'] ) ? $block_settings['headerOutlined'] : '';
        $header_border_color = isset( $block_settings['headerCssBorderColor'] ) ? $block_settings['headerCssBorderColor'] : '';
        $header_background_color = isset( $block_settings['headerCssBackgroundColor'] ) ? $block_settings['headerCssBackgroundColor'] : '';
        $header_background_gradient = isset( $block_settings['headerCssBackgroundImage'] ) ? $block_settings['headerCssBackgroundImage'] : '';
        $header_border_top_width = isset( $block_settings['headerCssBorderTopWidth'] ) ? $block_settings['headerCssBorderTopWidth'] : '0px';
        $header_border_bottom_width = isset( $block_settings['headerCssBorderBottomWidth'] ) ? $block_settings['headerCssBorderBottomWidth'] : '1px';
        // $img_aspect_ratio = isset( $block_settings['imgAspectRatio'] ) ? $block_settings['imgAspectRatio'] : '';

        $background_color = isset( $block_settings['backgroundColor'] ) ? $block_settings['backgroundColor'] : '';
        $background_gradient = isset( $block_settings['backgroundGradient'] ) ? $block_settings['backgroundGradient'] : '';
        $background_url = isset( $block_settings['backgroundUrl'] ) ? $block_settings['backgroundUrl'] : '';
        $background_type = isset( $block_settings['backgroundType'] ) ? $block_settings['backgroundType'] : '';
        $background_position = isset($block_settings['backgroundImagePosition']) ? $block_settings['backgroundImagePosition'] : '50% 50%';
        $background_size = isset($block_settings['backgroundImageSize']) ? $block_settings['backgroundImageSize'] : 'cover';
        $background_repeat = isset($block_settings['backgroundImageRepeat']) ? $block_settings['backgroundImageRepeat'] : 'repeat';
        $background_fallback_url = isset( $block_settings['backgroundFallbackUrl'] ) ? $block_settings['backgroundFallbackUrl'] : '';
        $background_opacity = isset( $block_settings['backgroundOpacity'] ) ? $block_settings['backgroundOpacity'] : '';
        $border_width = isset( $block_settings['borderWidth'] ) ? $block_settings['borderWidth'] : '';
        $border_color = isset( $block_settings['cssBorderColor'] ) ? $block_settings['cssBorderColor'] : '';
        $border_radius = isset( $block_settings['cssBorderRadius'] ) ? $block_settings['cssBorderRadius'] : '';


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_posts_img_aspect_ratio' => isset($img_size) ? $img_size : '',

                '--agni_block_posts_gap_desktop' => isset($gap['desktop']) ? $gap['desktop'] : '',
                '--agni_block_posts_gap_laptop' => isset($gap['laptop']) ? $gap['laptop'] : '',
                '--agni_block_posts_gap_tab' => isset($gap['tab']) ? $gap['tab'] : '',
                '--agni_block_posts_gap_mobile' => isset($gap['mobile']) ? $gap['mobile'] : '',

                '--agni_block_posts_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_posts_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_posts_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_posts_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : '',

                '--agni_block_posts_header_border_top_width' => $header_border_top_width,
                '--agni_block_posts_header_border_bottom_width' => $header_border_bottom_width,
                '--agni_block_posts_header_border_color' => $header_border_color,
                '--agni_block_posts_header_background_color' => $header_background_color,
                '--agni_block_posts_header_background_gradient' => $header_background_gradient,
                '--agni_block_posts_header_btn_color' => $header_btn_color,

                '--agni_block_posts_heading_font_size_desktop' => isset($heading_font_size['desktop']) ? $heading_font_size['desktop'] : '',
                '--agni_block_posts_heading_font_size_laptop' => isset($heading_font_size['laptop']) ? $heading_font_size['laptop'] : '',
                '--agni_block_posts_heading_font_size_tab' => isset($heading_font_size['tab']) ? $heading_font_size['tab'] : '',
                '--agni_block_posts_heading_font_size_mobile' => isset($heading_font_size['mobile']) ? $heading_font_size['mobile'] : '',
                '--agni_block_posts_heading_color' => isset($heading_color) ? $heading_color : '',

                '--agni_block_posts_background_opacity' => !empty($background_opacity) ? $background_opacity . '%' : '',
                '--agni_block_posts_background_color' => $background_color,
                '--agni_block_posts_background_gradient' => $background_gradient,
                '--agni_block_posts_background_image_url' => 'url(' . $background_url . ')',
                '--agni_block_posts_background_image_position' => $background_position,
                '--agni_block_posts_background_image_size' => $background_size,
                '--agni_block_posts_background_image_repeat' => $background_repeat,

                'border-color' => $border_color,
                'border-radius' => $border_radius,
            ) );
        $styles .= "}";


        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_portfolio' ) ){
    function agni_builder_gutenberg_blocks_css_portfolio( $block_settings, $block_classname ){
        $styles = '';

        $columns = isset( $block_settings['columns'] ) ? $block_settings['columns'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_portfolio_gap' => $gap,

                '--agni_block_portfolio_columns_desktop' => isset($columns['desktop']) ? $columns['desktop'] : '',
                '--agni_block_portfolio_columns_laptop' => isset($columns['laptop']) ? $columns['laptop'] : '',
                '--agni_block_portfolio_columns_tab' => isset($columns['tab']) ? $columns['tab'] : '',
                '--agni_block_portfolio_columns_mobile' => isset($columns['mobile']) ? $columns['mobile'] : ''

            ) );
        $styles .= "}";


        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_menu' ) ){
    function agni_builder_gutenberg_blocks_css_menu( $block_settings, $block_classname ){
        $styles = '';


        // $align = isset( $block_settings['textAlign'] ) ? $block_settings['textAlign'] : '';
        $font_size = isset( $block_settings['fontSize'] ) ? $block_settings['fontSize'] : '';
        $gap = isset( $block_settings['gap'] ) ? $block_settings['gap'] : '';
        $text_transform = isset( $block_settings['textTransform'] ) ? $block_settings['textTransform'] : '';
        $color = isset( $block_settings['color'] ) ? $block_settings['color'] : '';


        $styles .= "{$block_classname}{";
            $styles .= agni_builder_prepare_css_styles( array(
                '--agni_block_menu_gap' => $gap,

                '--agni_block_menu_font_size_desktop' => isset($font_size['desktop']) ? $font_size['desktop'] : '',
                '--agni_block_menu_font_size_laptop' => isset($font_size['laptop']) ? $font_size['laptop'] : '',
                '--agni_block_menu_font_size_tab' => isset($font_size['tab']) ? $font_size['tab'] : '',
                '--agni_block_menu_font_size_mobile' => isset($font_size['mobile']) ? $font_size['mobile'] : '',

                '--agni_block_menu_text_transform' => $text_transform,
                '--agni_block_menu_color' => $color,
            ) );
        $styles .= "}";

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_spacing_parser' ) ){
    function agni_builder_gutenberg_blocks_css_spacing_parser( $block_settings, $block_classname ){
        $styles = '';

        $padding = isset( $block_settings['padding'] ) ? $block_settings['padding'] : '';
        $margin = isset( $block_settings['margin'] ) ? $block_settings['margin'] : '';

        $new_padding = $new_margin = array();
        if( !empty($padding) ){
            foreach ($padding as $deviceKey => $device) {
                foreach ($device as $position => $value) {
                    $position = ucfirst($position);
                    $new_padding['cssPadding' . $position][$deviceKey] = $value;
                }
            }
        }
        if( !empty($margin) ){
            foreach ($margin as $deviceKey => $device) {
                foreach ($device as $position => $value) {
                    $position = ucfirst($position);
                    $new_margin['cssMargin' . $position][$deviceKey] = $value;
                }
            }
        }

        $styles .= apply_filters( 'agni_gutenberg_blocks_css_parser', $new_padding, $block_classname );
        $styles .= apply_filters( 'agni_gutenberg_blocks_css_parser', $new_margin, $block_classname );

        return $styles;
    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_parser' ) ){
    function agni_builder_gutenberg_blocks_css_parser( $settings, $block_classname = '' ){

        $styles = '';
        $field_keys = array();
        
        $css_pattern = 'css';
        $hover_css_pattern = 'hoverCss';
        $array_pattern = 'cssArray';
        $repeatable_pattern = 'repeatable';


        // $block_classname = isset( $settings['customClassName'] ) ? $block_classname .' .'. $settings['customClassName'] : '';
        // $block_classname = isset( $settings['customClassName'] ) ? ' .' .$settings['customClassName'] : $block_classname;
        // $classname = $row_classname .' '. $col_classname .' '. $block_classname;

        foreach ($settings as $field_key => $field_value) {
            if( strpos($field_key, $array_pattern) === false ){
                if (strpos($field_key, $css_pattern) !== false || strpos($field_key, $hover_css_pattern) !== false) {

                    // echo $field_key . "\n";
                    if(strpos($field_key, $css_pattern) !== false){
                        $field_key = str_replace($css_pattern, '', $field_key);
                        $event = 'default';
                    }
                    else{
                        $field_key = str_replace($hover_css_pattern, '', $field_key);
                        $event = 'hover';
                    }
                    $field_key = AgniBuilderHelper::prepare_camel_to_dash( $field_key );

                    if( is_array( $field_value ) ){
                        $field_keys[$event]['mobile'][$field_key] = isset( $field_value['mobile'] ) ? $field_value['mobile'] : '';
                        $field_keys[$event]['tab'][$field_key] = isset( $field_value['tab'] ) ? $field_value['tab'] : '';
                        $field_keys[$event]['laptop'][$field_key] = isset( $field_value['laptop'] ) ? $field_value['laptop'] : '';
                        $field_keys[$event]['desktop'][$field_key] = isset( $field_value['desktop'] ) ? $field_value['desktop'] : '';
                    }
                    else{
                        $field_keys[$event]['common'][$field_key] = $field_value;
                    }
                }
            }

            // if( strpos($field_key, $array_pattern) !== false ){
            if( is_array( $field_value ) ){
                // print_r($field_value);
                $font_values = $field_value;
                //$font_values['className'] = $block_classname;

                $styles .= apply_filters( 'agni_gutenberg_blocks_css_parser', $font_values, $block_classname );
            }
        }


        $styles .= apply_filters( 'agni_gutenberg_blocks_css_array_parser', $field_keys, $block_classname );

        return $styles;

    }
}

if( !function_exists( 'agni_builder_gutenberg_blocks_css_array_parser' ) ){
    function agni_builder_gutenberg_blocks_css_array_parser( $fields, $classname ){
        $styles = '';
        $new_classname = $classname;

        foreach ($fields as $event_key => $event) {
            if( $event_key == 'hover' ){
                $new_classname = $new_classname . ':hover';
            }
            else{
                $new_classname = $classname;
            }
            foreach ($event as $device => $css) {
                if( $device == 'desktop' ){
                    $break_point = '1440px';
                }
                else if( $device == 'laptop' ){
                    $break_point = '1024px';
                }
                else if( $device == 'tab' ){
                    $break_point = '667px';
                }
                // else if( $device == 'mobile' ){
                //     $break_point = '';
                // }
                
                if( $device !== 'common' && $device !== 'mobile' ){
                    $styles .= '@media (min-width: ' . $break_point . '){';
                }
                $styles .= $new_classname . '{';
                foreach ($css as $key => $value) {
                    // if( !empty($value) ){
                    if( $value !== '' && $value !== 'px' && $value !== '%' && $value !== 'em' && $value !== 'rem' && $value !== 'vw' && $value !== 'vh' ){
                        $styles .= $key . ': ' . $value . '; ';
                    }
                }
                $styles .= '}';
                if( $device !== 'common' && $device !== 'mobile' ){
                    $styles .= '}';
                }
            }
        }

        return $styles;
    }
}


function agni_builder_prepare_css_styles($css_array){
    $css_values_array = [];
    foreach ($css_array as $key => $value) {
        // if(!empty($value)){
        //     $css_values_array[] = "{$key}:{$value};";
        // }
        if($value !== '' && $value !== 'px' && $value !== '%' && $value !== 'em' && $value !== 'rem' && $value !== 'vw' && $value !== 'vh'){
            $css_values_array[] = "{$key}:{$value};";
        }
    }
    return implode(' ', array_filter($css_values_array));
}

?>